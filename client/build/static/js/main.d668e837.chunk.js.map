{"version":3,"sources":["components/images/icons8-basket-100.png","components/images/icons8-admin-48.png","components/images/image_about.jpg","config/global_constants.js","components/NavigationBar.js","components/LinkInClass.js","components/Register.js","components/ResetDatabase.js","components/Login.js","components/Logout.js","components/LoggedInRoute.js","components/PayPalMessage.js","components/Contact.js","components/BuyShirt.js","components/ShoppingCart.js","components/AddTShirt.js","components/ShirtBlock.js","components/Main.js","components/EditTShirt.js","components/DeleteTShirt.js","components/SubShirt.js","components/About.js","components/Dashboard.js","components/ViewAllUsers.js","components/ViewPurchaseHistory.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","ACCESS_LEVEL_NORMAL_USER","ACCESS_LEVEL_ADMIN","SERVER_HOST","Down","props","showSelect","document","getElementById","style","display","closeSelect","handleSearchInputChange","event","handleGenderFilterChange","bind","value","this","id","class","window","location","href","includes","className","onMouseOver","onMouseLeave","to","onClick","src","basketpng","localStorage","accessLevel","adminpng","profilePhoto","alt","Component","LinkInClass","tabIndex","Register","handleChange","e","setState","target","name","handleFileChange","selectedFile","files","handleSubmit","preventDefault","formData","FormData","state","append","axios","post","email","password","headers","then","res","data","token","isRegistered","setItem","JSON","stringify","catch","err","wasSubmittedAtLeastOnce","confirmPassword","errorMessage","noValidate","type","placeholder","autoComplete","onChange","ref","input","inputToFocus","title","ResetDatabase","resetUsersModel","console","log","clear","isReset","Login","isLoggedIn","Logout","LoggedInRoute","component","exact","path","rest","render","PayPalMessage","redirectToDisplayAllShirts","buttonColour","cart","match","params","messageType","SUCCESS","heading","message","cartLocalStorage","parse","getItem","forEach","item","index","shirtObject","stock","quantity","sold","put","shirtId","removeItem","error","CANCEL","ERROR","payPalPaymentID","Contact","rows","cols","width","height","BuyShirt","createOrder","actions","order","create","purchase_units","amount","price","onApprove","paymentData","items","customerName","customerEmail","address","phone","inputData","orderID","payPalMessageType","payPalOrderID","redirectToPayPalMessage","errorData","onError","onCancel","cancelData","options","currency","layout","ShoppingCart","field","updatedCart","currentItem","groupedItems","reduce","groups","group","find","g","totalPrice","push","size","shirtPhotoFilename","handleDelete","filter","loadShirtPhotos","handleGuest","submitGuestDetail","guestEmail","guestName","guestAddress","guestPhone","errors","trim","test","Object","keys","length","haveEnoughData","user","isGuest","some","map","Math","min","userEmail","get","photo","filename","_id","image","toFixed","cartItem","shirtID","key","max","required","getIdAndQuantity","calculateTotalPrice","pathname","from","undefined","AddTShirt","description","gender","i","focus","Group","controlId","Label","Control","as","Check","inline","label","checked","multiple","ShirtBlock","shirt","Main","searchQuery","handleSortChange","sortType","genderFilter","shirts","filteredShirtsName","toLowerCase","sort","a","b","EditTShirt","DeleteTShirt","delete","SubShirt","parseInt","itemsInCart","redirectToDisplayAllShirtsInCart","handleMoveLeft","prevState","currentSlideIndex","handleMoveRight","totalSlides","redirectToMain","redirectBackToMain","cartId","shirtData","About","image_about","Dashboard","handleInputChange","updateUser","newName","newPhone","newAddress","redirectToCart","onSubmit","ViewAllUsers","userId","users","handleSearchChange","sortFunction","handlePhoneFilterChange","phoneFilter","filteredUsers","startsWith","sortedUsers","localeCompare","htmlFor","orderId","itemId","stockBeforeReturn","itemQuantity","refundMoney","refundedMoney","saleObject","newItems","updatedPurchaseHistory","purchaseHistory","refunded","updateAllOrders","allOrders","itemsInArray","eachItemsInOrder","updatedItem","handleSortByTotalPrice","handleSortByDefault","handleSizeFilterChange","sizeFilter","elements","getElementsByClassName","Array","element","filteredOrders","sortedOrders","App","NavigationBar","ViewPurchaseHistory","Boolean","hostname","ReactDOM","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.d668e837.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEY0lEQVR4nO2dy48VRRSHG0XxAWvBDCLEIRH8FwDjI7hgwSOEDQsWiokmuvARHztcaAIY3bAWI5sRMXEEwWBcIoqJLnQD+NwioMbHOMpHKpTQKe/MeG+d01Vddb59nfPr8829c7tu9+2mMQzDMAzDMCoC2Aj8iDyu5sbUx9crgK3ANHr8DWxPfZy9AH0ZJiVDGWW+UoAHgQPA98AU8kwD2wTzblMSPuVn8BbwgFTeYQ7sduBDdJmWlNGBlDbH3Iyks890QHcC3/VRRsdSvgGWNZoANwCnlA/khy4+lvqP1a6XJp8C8zUPYueAph8D64BFTaUAi/wM3CxCHtZsHL463gOuV2vYM9wsgMlgRp9pNVsMXGo1+gdYodKsx7iZ+Nn8i5vZYo1GmwPzn4g3KQQ3m2BWmzWavBo02SPepBCAvcGs9mo0ORk02STepBDU302Amwecicu/LxYCcFswq7+AWyQb3Bs0OC1WvFCAM8HM1kkWfzEo/oZY8UIB9gcze0Gy+JGg+CNixQuF/55EH5YqPA/4KSi+SqR4wQCrg5ldAK6TKHxPUPi8SOHCYfAf8mqJwo8GRSdFElcA8H4wu50SRd8Mij4nkrYCgOeD2e2XKHo2KLpGJG0FAGuD2Z3J+wSncBh8Qr0kpuCWoNgJ0cQVgORGo20oZrbR6L+CbGMbivEbjSdHLWQbigKI/R+2DcXMNhptQzHhRiMwBrwN/BIsNPRxMz8ErGzLCPdcjO5xDsYa/8ow8mDCCbG3qXz42QkxMsKEZIYJyQwTkhkmJDNMSGbYx968uOiEvJM6hXGVg07ISts6yWbrZLy9nzXhzhRTp6oQN/ODV2UYhmEYhiTu6pLU/+kq4P9fwQMsBP5Mnbhgpob+oQXgo9SpC+b4KG9bT6dOXTBPjSJkVerUBXP30EJmuBXBiOfbkWR4IfvQ57DfuhkbcHNpH9YPy74YIRs6CDjW6re0h+uHZUOMkFuBPzTTDejZq/VD4k4lFo4sxAc8qpmwMiEfRMnwAZ/UTFiZkCckhIxrJqxMyF3RQnzI01oJKxJyVkSGD/m6VsqKhLwmKeQhrZQVCVkvKeQm4DeNlJUI+d3dsykmZIbf7RChEiGTojJ80Mc1klYi5DENIcs1klYiZIW4EB/2a+mkFQj5SkWGD7tHOm0FQnZrCrlfOm0FQu7TFHKj9E2ihQv5FVigJsQHflcyceqBNpHr5+CQpovZniEyMqkH2kSunwP9n9P1X3W2H1sRReqBNpHr5+AOTRft0F9KJU490CZy/Sx8oekgDP2KVOrUA20i18/Cy5oOwtDueUsipB5oE7l+FtZqOghDz/c/nR1N6oE2ketn4KJ7ol3TJf4WOAlKvAxoolMZPvwOofBH/CCWuqsyerh+EDtSCAmf2mZc4VLUjyVHSvnchzCucSqJDC/kpVYQ4wq7UgoZ7/j557kznfx+c+DZ1FPIiGeaHHCXuPhniJ+jPs75Y5e7zMcwDMMwDMMwDKPpjsu3j1azMsBtDwAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABd0lEQVR4nO2YS04CQRCGe+PjAuxdK0aXegPdAxu9gvEkGAiKdyC6MC59XEK9AO4wYgQ3RpzPVNILFsM8enAsSX3JJJ1QwP9B0dWDc4ZhGAsFsAm0gUfgw1+ybgFVpxVgBegC38xmApwCy05h+Huyc6dKAjgnPx2nqOeT2iapnTY0CMgPNpQTDQJPBQQeNAiMCwiMNAiMCgi8/3X+hWihVgGBpgaBqt8S8yLPWXca8MeDvLSdFuRYANzmCH8DLDlNeIlOSjtN/ODTFX4aOR7IhJUdxs+IsV831fS8YRiGboAa8Ap8+kvWNacFYBVoAJWYxyrAIGaIDRLqG/LHQBnBt4EzYOhD9WJqegmTOKl+6F976zeCrwGXQBQTqj5VV89wDkqrj4ALec95hT9MuW18Aw58nazTyFo/krqi4Y9nfOplEQFHoeF3A29U5s0XsBMicI0erkIEZO/WwkuIgCqcCfzDb+AZPfRDBPaVSPSBvdwChmEYrgx+AAy+y1HNFsBIAAAAAElFTkSuQmCC\"","module.exports = __webpack_public_path__ + \"static/media/image_about.7658fbcf.jpg\";","// This file holds global constants that are visible on the Client-side\r\n\r\n\r\n// Access level\r\nexport const ACCESS_LEVEL_GUEST = 0\r\nexport const ACCESS_LEVEL_NORMAL_USER = 1\r\nexport const ACCESS_LEVEL_ADMIN = 2\r\n\r\n// PayPal\r\nexport const SANDBOX_CLIENT_ID = \"AcIUIu8T09LM3rHOglerDaRR0WBPe1icp8nD2eUAIzcvgCtmqmvDndA74OEiD5UQALcVxHOztV5ysspu\"\r\nexport const PRODUCTION_CLIENT_ID = \"TO_MAKE_A_LIVE_REAL_WORLD_APPLICATION_REPLACE_THIS_TEXT_WITH_YOUR_PRODUCTION_CLIENT_ID\"\r\n\r\n// Server\r\nexport const SERVER_HOST = `http://localhost:4000`","import React, { Component } from \"react\"\r\n\r\nimport { Link } from \"react-router-dom\"\r\nimport basketpng from \"./images/icons8-basket-100.png\"\r\nimport adminpng from \"./images/icons8-admin-48.png\"\r\nimport { ACCESS_LEVEL_GUEST, ACCESS_LEVEL_ADMIN, SERVER_HOST, ACCESS_LEVEL_NORMAL_USER } from \"../config/global_constants\"\r\nexport default class Down extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleGenderFilterChange = this.handleGenderFilterChange.bind(this);\r\n    }\r\n\r\n    handleGenderFilterChange(value) {\r\n        this.props.handleGenderFilterChange(value);\r\n    }\r\n    showSelect = () => {\r\n        var selectContainer = document.getElementById(\"select-container\");\r\n        selectContainer.style.display = \"block\";\r\n    }\r\n    closeSelect = () => {\r\n        var selectContainer = document.getElementById(\"select-container\");\r\n        selectContainer.style.display = \"none\";\r\n    }\r\n\r\n    handleSearchInputChange = (event) => {\r\n        this.props.handleSearchInputChange(event)\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <nav id=\"navigationbar-container\">\r\n                <div class=\"splitL\">\r\n                    {/* <div>\r\n                        <Link to={\"/main\"} >BUY T-SHIRT</Link>\r\n                    </div> */}\r\n                    <div>\r\n                        {window.location.href.includes('/main') ?\r\n                            <div className=\"dropdown\" onMouseOver={this.showSelect} onMouseLeave={this.closeSelect}> {/* onMouseLeave={this.closeSelect} */}\r\n                                <Link to={\"/main\"} className=\"dropbtn\">CATEGORIES</Link>\r\n                                {/* <div id=\"select-container\"> */}\r\n                                {/* <select value={this.props.genderFilter} onChange={this.props.handleGenderFilterChange}>\r\n                                <option value=\"\">All Genders</option>\r\n                                <option value=\"male\">Male</option>\r\n                                <option value=\"female\">Female</option>\r\n                                <option value=\"unisex\">Unisex</option>\r\n                            </select> */}\r\n\r\n                                <div className=\"dropdown-content\" id=\"select-container\">\r\n                                    <Link className=\"select-gender\" to={\"/main\"} onClick={() => this.handleGenderFilterChange(\"\")}>DEFAULT</Link>\r\n                                    <Link className=\"select-gender\" to={\"/main\"} onClick={() => this.handleGenderFilterChange(\"male\")}>MALE</Link>\r\n                                    <Link className=\"select-gender\" to={\"/main\"} onClick={() => this.handleGenderFilterChange(\"female\")}>FEMALE</Link>\r\n                                    <Link className=\"select-gender\" to={\"/main\"} onClick={() => this.handleGenderFilterChange(\"unisex\")}>UNISEX</Link>\r\n                                </div>\r\n                                {/* </div> */}\r\n                            </div> : <Link to={\"/main\"} className=\"dropbtn\">CATEGORIES</Link>}\r\n\r\n                    </div>\r\n                    <div>\r\n                        <Link to={\"/About\"}>ABOUT</Link></div>\r\n                    <div> <Link to={\"/Contact\"}>CONTACT</Link></div>\r\n\r\n                </div>\r\n                <div class=\"splitC\">\r\n                    <Link to={\"/main\"} className=\"linktomainpagestorelogo\"><h1>T-SHIRT STORE</h1></Link>\r\n                </div>\r\n                <div class=\"splitR\">\r\n\r\n                    <div className=\"navbasket\">\r\n                        <Link to={\"/ShoppingCart\"}><img src={basketpng} /></Link>\r\n                    </div>\r\n                    <div className=\"navadminorusericon\">\r\n                        {/* if statement in an if statement */}\r\n                        {\r\n                            localStorage.accessLevel > ACCESS_LEVEL_NORMAL_USER\r\n                                ? <Link to={\"/viewallusers\"}>\r\n                                    <img src={adminpng} />\r\n                                </Link>\r\n                                : (localStorage.accessLevel > ACCESS_LEVEL_GUEST)\r\n                                    ? <Link to=\"/dashboard\">\r\n                                        {\r\n                                            localStorage.profilePhoto !== \"null\"\r\n                                                ? <img id=\"profilePhoto\" src={`data:;base64,${localStorage.profilePhoto}`} alt=\"\" />\r\n                                                : null\r\n                                        }\r\n                                        {/* <Logout /> */}\r\n                                    </Link>\r\n                                    : <Link to={\"/Login\"}>LOG IN</Link>\r\n                        }\r\n                    </div>\r\n                </div>\r\n            </nav>\r\n        )\r\n    }\r\n}\r\n","//Author: Derek O Reilly\r\n//\r\n// Helper Component class that allows us to have a button that render the same way as a <Link> component\r\n// Use this class to link to functions within the same class\r\n// Use <Link> to link to Components that are in other routes\r\nimport React, {Component} from \"react\"\r\n\r\n\r\nexport default class LinkInClass extends Component\r\n{\r\n    render()\r\n    {\r\n        return (\r\n            <span tabIndex=\"0\" className={this.props.className} onClick={(event) => {this.props.onClick(event)}}>     \r\n                {this.props.value}\r\n            </span>\r\n        )\r\n    }\r\n}","// import React, {Component} from \"react\"\r\n// import {Redirect, Link} from \"react-router-dom\"\r\n// import axios from \"axios\"\r\n// import NavigationBar from \"./NavigationBar\"\r\n\r\n// import LinkInClass from \"../components/LinkInClass\"\r\n\r\n// import {SERVER_HOST} from \"../config/global_constants\"\r\n\r\n\r\n// export default class Register extends Component\r\n// {\r\n//     constructor(props)\r\n//     {\r\n//         super(props)\r\n\r\n//         this.state = {\r\n//             name:\"\",\r\n//             email:\"\",\r\n//             password:\"\",\r\n//             confirmPassword:\"\", \r\n//             selectedFile:null,\r\n//             isRegistered:false,\r\n//             wasSubmittedAtLeastOnce:false\r\n//         } \r\n//     }\r\n\r\n\r\n//     handleChange = (e) => \r\n//     {\r\n//         this.setState({[e.target.name]: e.target.value})\r\n//     }\r\n\r\n\r\n//     handleFileChange = (e) => \r\n//     {\r\n//         this.setState({selectedFile: e.target.files[0]})\r\n//     }\r\n\r\n\r\n//     handleSubmit = (e) => \r\n//     {\r\n//         e.preventDefault()\r\n//         console.log(\"name\", this.state.name)\r\n//         console.log(\"email\", this.state.email)\r\n//         console.log(\"password\", this.state.password)\r\n//         console.log(\"formdata: \", this.state.formData)\r\n\r\n//         let formData = new FormData()  \r\n//         if(this.state.selectedFile)\r\n//         {\r\n//             formData.append(\"profilePhoto\", this.state.selectedFile, this.state.selectedFile.name)\r\n//         }    \r\n//         axios.post(`${SERVER_HOST}/users/register/${this.state.name}/${this.state.email}/${this.state.password}`, formData, {headers: {\"Content-type\": \"multipart/form-data\"}})\r\n//         .then(res => \r\n//         {     \r\n//             localStorage.name = res.data.name\r\n//             localStorage.accessLevel = res.data.accessLevel\r\n//             localStorage.profilePhoto = res.data.profilePhoto                    \r\n//             localStorage.token = res.data.token\r\n\r\n//             this.setState({isRegistered:true})               \r\n//         })   \r\n//         .catch(err =>\r\n//         {\r\n//             this.setState({wasSubmittedAtLeastOnce: true})            \r\n//         })\r\n//     }\r\n\r\n\r\n//     render() \r\n//     {     \r\n//         let errorMessage = \"\";\r\n//         if(this.state.wasSubmittedAtLeastOnce)\r\n//         {\r\n//             errorMessage = <div className=\"error\">Error: All fields must be filled in<br/></div>;\r\n//         }          \r\n\r\n//         return (\r\n//             <>\r\n//             <NavigationBar />\r\n//             <main className=\"login_main\">\r\n//             <div className=\"outside-form-container\">\r\n//         <form className=\"form-container\" noValidate = {true} id = \"loginOrRegistrationForm\">\r\n\r\n//             {this.state.isRegistered ? <Redirect to=\"/main\"/> : null} \r\n//             {errorMessage}\r\n//             <div className=\"loginHeaderContainer\">\r\n//                         <Link className=\"anotherLoginHeader\" to={\"/Login\"}>Login</Link>\r\n//                         <p className=\"loginHeaderLink\">|</p>\r\n//                         <h2>Sign Up</h2>\r\n//                     </div>\r\n\r\n//             <input  \r\n//                 name = \"name\"              \r\n//                 type = \"text\"\r\n//                 placeholder = \"Name\"\r\n//                 autoComplete=\"name\"\r\n//                 value = {this.state.name}\r\n//                 onChange = {this.handleChange}\r\n//                 ref = {(input) => { this.inputToFocus = input }} \r\n//             /><br/>           \r\n\r\n//         <input  \r\n//                 name = \"email\"              \r\n//                 type = \"email\"\r\n//                 placeholder = \"Email\"\r\n//                 autoComplete=\"email\"\r\n//                 value = {this.state.email}\r\n//                 onChange = {this.handleChange}\r\n//             /><br/>              \r\n\r\n//         <input  \r\n//                 name = \"password\"           \r\n//                 type = \"password\"\r\n//                 placeholder = \"Password\"\r\n//                 autoComplete=\"password\"\r\n//                 title = \"Password must be at least ten-digits long and contains at least one lowercase letter, one uppercase letter, one digit and one of the following characters (£!#€$%^&*)\"\r\n//                 value = {this.state.password}\r\n//                 onChange = {this.handleChange}\r\n//             /><br/>           \r\n\r\n//             <input          \r\n//                 name = \"confirmPassword\"    \r\n//                 type = \"password\"\r\n//                 placeholder = \"Confirm password\"\r\n//                 autoComplete=\"confirmPassword\"\r\n//                 value = {this.state.confirmPassword}\r\n//                 onChange = {this.handleChange}\r\n//             /><br/>\r\n\r\n//             <input            \r\n//                 type = \"file\"                    \r\n//                 onChange = {this.handleFileChange}\r\n//             /><br/><br/>\r\n\r\n//             <span>\r\n//             <LinkInClass value=\"Register New User\" className=\"green-button\" onClick={this.handleSubmit} />\r\n//             <Link className=\"red-button\" to={\"/main\"}>Cancel</Link>   \r\n//             </span>\r\n//         </form>\r\n//         </div>\r\n//         </main>\r\n//         </>\r\n//         )\r\n//     }\r\n// }\r\n\r\nimport React, { Component } from \"react\"\r\nimport { Redirect, Link } from \"react-router-dom\"\r\nimport axios from \"axios\"\r\nimport NavigationBar from \"./NavigationBar\"\r\n\r\nimport LinkInClass from \"../components/LinkInClass\"\r\n\r\nimport { SERVER_HOST } from \"../config/global_constants\"\r\n\r\n\r\nexport default class Register extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            name: \"\",\r\n            email: \"\",\r\n            password: \"\",\r\n            confirmPassword: \"\",\r\n            selectedFile: null,\r\n            isRegistered: false,\r\n            wasSubmittedAtLeastOnce: false\r\n        }\r\n    }\r\n\r\n\r\n    handleChange = (e) => {\r\n        this.setState({ [e.target.name]: e.target.value })\r\n    }\r\n\r\n\r\n    handleFileChange = (e) => {\r\n        this.setState({ selectedFile: e.target.files[0] })\r\n    }\r\n\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault()\r\n\r\n        let formData = new FormData()\r\n        if (this.state.selectedFile) {\r\n            formData.append(\"profilePhoto\", this.state.selectedFile, this.state.selectedFile.name)\r\n        }\r\n        axios.post(`${SERVER_HOST}/users/register/${this.state.name}/${this.state.email}/${this.state.password}`, formData, { headers: { \"Content-type\": \"multipart/form-data\" } })\r\n            .then(res => {\r\n                localStorage.name = res.data.name\r\n                localStorage.accessLevel = res.data.accessLevel\r\n                localStorage.profilePhoto = res.data.profilePhoto\r\n                localStorage.token = res.data.token\r\n\r\n                this.setState({ isRegistered: true })\r\n                localStorage.setItem(\"userEmail\", JSON.stringify(this.state.email));\r\n            })\r\n            .catch(err => {\r\n                this.setState({ wasSubmittedAtLeastOnce: true })\r\n            })\r\n        // localStorage.setItem(\"userEmail\", JSON.stringify(this.state.email));\r\n    }\r\n\r\n\r\n    render() {\r\n        let errorMessage = \"\";\r\n        if (this.state.wasSubmittedAtLeastOnce) {\r\n            errorMessage = <div className=\"error\">Error: All fields must be filled in<br /></div>;\r\n        }\r\n\r\n        return (\r\n            <>\r\n                <NavigationBar />\r\n                <main className=\"login_main\">\r\n                    <div className=\"outside-form-container\">\r\n                        <form className=\"form-container\" noValidate={true} id=\"loginOrRegistrationForm\">\r\n\r\n                            {this.state.isRegistered ? <Redirect to=\"/main\" /> : null}\r\n                            {errorMessage}\r\n                            <div className=\"loginHeaderContainer\">\r\n                                <Link className=\"anotherLoginHeader\" to={\"/Login\"}>Login</Link>\r\n                                <p className=\"loginHeaderLink\">|</p>\r\n                                <h2>Sign Up</h2>\r\n                            </div>\r\n\r\n                            <input\r\n                                name=\"name\"\r\n                                type=\"text\"\r\n                                placeholder=\"Name\"\r\n                                autoComplete=\"name\"\r\n                                value={this.state.name}\r\n                                onChange={this.handleChange}\r\n                                ref={(input) => { this.inputToFocus = input }}\r\n                            /><br />\r\n\r\n                            <input\r\n                                name=\"email\"\r\n                                type=\"email\"\r\n                                placeholder=\"Email\"\r\n                                autoComplete=\"email\"\r\n                                value={this.state.email}\r\n                                onChange={this.handleChange}\r\n                            /><br />\r\n\r\n                            <input\r\n                                name=\"password\"\r\n                                type=\"password\"\r\n                                placeholder=\"Password\"\r\n                                autoComplete=\"password\"\r\n                                title=\"Password must be at least ten-digits long and contains at least one lowercase letter, one uppercase letter, one digit and one of the following characters (£!#€$%^&*)\"\r\n                                value={this.state.password}\r\n                                onChange={this.handleChange}\r\n                            /><br />\r\n\r\n                            <input\r\n                                name=\"confirmPassword\"\r\n                                type=\"password\"\r\n                                placeholder=\"Confirm password\"\r\n                                autoComplete=\"confirmPassword\"\r\n                                value={this.state.confirmPassword}\r\n                                onChange={this.handleChange}\r\n                            /><br />\r\n\r\n                            <input\r\n                                type=\"file\"\r\n                                onChange={this.handleFileChange}\r\n                            /><br /><br />\r\n\r\n                            <div className=\"login-bottom-button\">\r\n                                <LinkInClass value=\"Register New User\" className=\"green-button\" onClick={this.handleSubmit} />\r\n                                <Link className=\"red-button\" to={\"/main\"}>Cancel</Link>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </main>\r\n            </>\r\n        )\r\n    }\r\n}","import React, { Component } from \"react\"\r\nimport { Redirect, Link } from \"react-router-dom\"\r\nimport axios from \"axios\"\r\n\r\nimport LinkInClass from \"../components/LinkInClass\"\r\nimport { SERVER_HOST } from \"../config/global_constants\"\r\n\r\n\r\nexport default class ResetDatabase extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            isReset: false\r\n        }\r\n    }\r\n\r\n\r\n    handleChange = (e) => {\r\n        this.setState({ [e.target.name]: e.target.value })\r\n    }\r\n\r\n\r\n    resetUsersModel = () => {\r\n        axios.post(`${SERVER_HOST}/users/reset_user_collection`)\r\n            .then(res => {\r\n                console.log(\"User collection reset\")\r\n\r\n                localStorage.clear()\r\n\r\n                this.setState({ isReset: true })\r\n            })\r\n            .catch(err => {\r\n                // do nothing    \r\n            })\r\n    }\r\n\r\n\r\n\r\n    render() {\r\n        return (\r\n            <form className=\"form-container\" noValidate={true} id=\"loginOrRegistrationForm\">\r\n\r\n                {this.state.isReset ? <Redirect to=\"/Main\" /> : null}\r\n\r\n                <p>\"Reset User Database\" is only for testing purposes.<br />All code on the client-side and server-side relating to resetting the database should be removed from any development release</p>\r\n                <LinkInClass value=\"Reset User Database\" className=\"red-button\" onClick={this.resetUsersModel} /> <br /><br />\r\n                <p>Reset the database and set up an administrator with:<br /> * email <strong>admin@admin.com</strong><br /> * password <strong>123!\"£qweQWE</strong></p>\r\n\r\n                <Link className=\"red-button\" to={\"/Main\"}>Cancel</Link>\r\n            </form>\r\n        )\r\n    }\r\n}","import React, { Component } from \"react\"\r\nimport { Redirect, Link } from \"react-router-dom\"\r\nimport axios from \"axios\"\r\nimport NavigationBar from \"./NavigationBar\"\r\n\r\nimport LinkInClass from \"../components/LinkInClass\"\r\nimport { SERVER_HOST } from \"../config/global_constants\"\r\n\r\n\r\nexport default class Login extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            email: \"\",\r\n            password: \"\",\r\n            isLoggedIn: false,\r\n            wasSubmittedAtLeastOnce: false\r\n        }\r\n    }\r\n\r\n\r\n    handleChange = (e) => {\r\n        this.setState({ [e.target.name]: e.target.value })\r\n    }\r\n\r\n\r\n    handleSubmit = (e) => {\r\n        axios.post(`${SERVER_HOST}/users/login/${this.state.email}/${this.state.password}`)\r\n            .then(res => {\r\n                localStorage.name = res.data.name\r\n                localStorage.accessLevel = res.data.accessLevel\r\n                localStorage.profilePhoto = res.data.profilePhoto\r\n                localStorage.token = res.data.token\r\n\r\n                this.setState({ isLoggedIn: true })\r\n                localStorage.setItem(\"userEmail\", JSON.stringify(this.state.email));\r\n            })\r\n            .catch(err => {\r\n                this.setState({ wasSubmittedAtLeastOnce: true })\r\n            })\r\n        // localStorage.setItem(\"userEmail\", JSON.stringify(this.state.email));\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        let errorMessage = \"\";\r\n        if (this.state.wasSubmittedAtLeastOnce) {\r\n            errorMessage = <div className=\"error\">Login Details are incorrect<br /></div>;\r\n        }\r\n\r\n        return (\r\n            <>\r\n                <NavigationBar />\r\n                <main className=\"login_main\">\r\n                    <div className=\"outside-form-container\">\r\n                        <form className=\"form-container\" noValidate={true} id=\"loginOrRegistrationForm\">\r\n                            <div className=\"loginHeaderContainer\">\r\n                                <h2>Login</h2>\r\n                                <p className=\"loginHeaderLink\">|</p>\r\n                                <Link className=\"anotherLoginHeader\" to={\"/Register\"}>Sign Up</Link>\r\n                            </div>\r\n\r\n                            {this.state.isLoggedIn ? <Redirect to=\"/main\" /> : null}\r\n                            {errorMessage}\r\n                            <input\r\n                                type=\"email\"\r\n                                name=\"email\"\r\n                                placeholder=\"Email\"\r\n                                autoComplete=\"email\"\r\n                                value={this.state.email}\r\n                                onChange={this.handleChange}\r\n                            /><br />\r\n\r\n                            <input\r\n                                type=\"password\"\r\n                                name=\"password\"\r\n                                placeholder=\"Password\"\r\n                                autoComplete=\"password\"\r\n                                value={this.state.password}\r\n                                onChange={this.handleChange}\r\n                            /><br /><br />\r\n                            <div className=\"login-bottom-button\">\r\n                                <LinkInClass value=\"Login\" className=\"green-button\" onClick={this.handleSubmit} />\r\n                                <Link className=\"red-button\" to={\"/main\"}>Cancel</Link>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </main>\r\n            </>\r\n        )\r\n    }\r\n}","import React, { Component } from \"react\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport axios from \"axios\"\r\n\r\nimport LinkInClass from \"../components/LinkInClass\"\r\nimport { SERVER_HOST } from \"../config/global_constants\"\r\n\r\n\r\nexport default class Logout extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            isLoggedIn: true\r\n        }\r\n    }\r\n\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault()\r\n\r\n        axios.post(`${SERVER_HOST}/users/logout`)\r\n            .then(res => {\r\n                localStorage.clear()\r\n\r\n                this.setState({ isLoggedIn: false })\r\n            })\r\n            .catch(err => {\r\n                // do nothing\r\n            })\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <>\r\n\r\n                {!this.state.isLoggedIn ? <Redirect to=\"/Main\" /> : null}\r\n\r\n                <LinkInClass value=\"LOG OUT\" onClick={this.handleSubmit} />\r\n            </>\r\n        )\r\n    }\r\n}","import React from 'react'\r\nimport { Route, Redirect } from \"react-router-dom\"\r\n\r\nimport { ACCESS_LEVEL_GUEST } from \"../config/global_constants\"\r\n\r\nconst LoggedInRoute = ({ component: Component, exact, path, ...rest }) =>\r\n(\r\n    <Route\r\n        exact={exact}\r\n        path={path}\r\n        render={props => localStorage.accessLevel >= ACCESS_LEVEL_GUEST ? <Component {...props} {...rest} /> : <Redirect to=\"/main\" />}\r\n    />\r\n)\r\n\r\nexport default LoggedInRoute","import React, { Component } from \"react\"\r\nimport { Redirect, Link } from \"react-router-dom\"\r\nimport axios from \"axios\"\r\nimport { SERVER_HOST } from \"../config/global_constants\"\r\n\r\nexport default class PayPalMessage extends Component {\r\n    static messageType = {\r\n        SUCCESS: \"success\",\r\n        ERROR: \"error\",\r\n        CANCEL: \"cancel\"\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            redirectToDisplayAllShirts: false,\r\n            buttonColour: \"red-button\",\r\n            cart: []\r\n        }\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        if (this.props.match.params.messageType === PayPalMessage.messageType.SUCCESS) {\r\n            this.setState({\r\n                heading: \"PayPal Transaction Confirmation\",\r\n                message: \"Your PayPal transaction was successful.\",\r\n                buttonColour: \"green-button\"\r\n            })\r\n            const cartLocalStorage = JSON.parse(localStorage.getItem(\"itemsInCart\") || \"[]\");\r\n\r\n            // console.log(\"itemsInCart: \",localStorage.getItem(\"itemsInCart\").forEach(item=>{item.shirtPhotoFilename}))\r\n\r\n            this.setState({ cart: cartLocalStorage }, () => {\r\n                this.state.cart.forEach((item, index) => {\r\n                    let shirtObject = {\r\n                        stock: item.stock - item.quantity\r\n                    };\r\n\r\n                    if (item.stock - item.quantity === 0) {\r\n                        shirtObject = {\r\n                            ...shirtObject,\r\n                            sold: true\r\n                        };\r\n                    }\r\n\r\n                    axios.put(`${SERVER_HOST}/shirts/sales/${item.shirtId}`, shirtObject, { headers: { \"authorization\": localStorage.token } })\r\n                        .then(res => {\r\n                            // Handle success if needed\r\n                            console.log(`Stock updated for shirt with ID: ${item.shirtId}`);\r\n                            localStorage.removeItem(\"itemsInCart\");\r\n                        })\r\n                        .catch(err => {\r\n                            // Handle error if needed\r\n                            console.error(`Error updating stock for shirt with ID: ${item.shirtId}`, err);\r\n                        });\r\n                });\r\n            });\r\n\r\n\r\n\r\n\r\n\r\n        }\r\n        else if (this.props.match.params.messageType === PayPalMessage.messageType.CANCEL) {\r\n            this.setState({\r\n                heading: \"PayPal Transaction Cancelled\",\r\n                message: \"You cancelled your PayPal transaction. Therefore, the transaction was not completed.\"\r\n            })\r\n        }\r\n        else if (this.props.match.params.messageType === PayPalMessage.messageType.ERROR) {\r\n            this.setState({\r\n                heading: \"PayPal Transaction Error\",\r\n                message: \"An error occured when trying to perform your PayPal transaction. The transaction was not completed. Please try to perform your transaction again.\"\r\n            })\r\n        }\r\n        else {\r\n            console.log(\"The 'messageType' prop that was passed into the PayPalMessage component is invalid. It must be one of the following: PayPalMessage.messageType.SUCCESS, PayPalMessage.messageType.CANCEL or PayPalMessage.messageType.ERROR\")\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"payPalMessage\">\r\n\r\n                {this.state.redirectToDisplayAllShirts ? <Redirect to=\"/main\" /> : null}\r\n\r\n                <h3>{this.state.heading}</h3>\r\n                <p>{this.props.match.params.message}</p>\r\n                <p>{this.state.message}</p>\r\n\r\n                {this.props.match.params.messageType === PayPalMessage.messageType.SUCCESS ? <p>Your PayPal payment confirmation is <span id=\"payPalPaymentID\">{this.props.match.params.payPalPaymentID}</span></p> : null}\r\n\r\n                <p id=\"payPalPaymentIDButton\"><Link className={this.state.buttonColour} to={\"/Main\"}>Continue</Link></p>\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\n// import { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\n// import { faEnvelope,faMapPin,faPhone} from '@fortawesome/free-solid-svg-icons'\r\n// import Map from './images/map.png'\r\nimport NavigationBar from \"./NavigationBar\"\r\n\r\nimport axios from \"axios\"\r\n// import DisplayAllCars from \"./DisplayAllCars\"\r\n// import Contact from \"./Contact\"\r\n\r\nexport default class Contact extends Component {\r\n    // constructor(props)\r\n    // {\r\n\r\n    //     super(props)\r\n    // }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"Contactpage\">\r\n                <NavigationBar />\r\n                <div className=\"contact\">\r\n                    <h1>Contact</h1>\r\n                    <p>Welcome to our T-shirt store! We’re thrilled to assist you. Whether you have questions, feedback, or need help, we’re here for you. Reach out through any of the following channels:</p>\r\n                </div>\r\n\r\n                <div className=\"GetInTouchContainer\">\r\n                    <div className=\"TouchContainer\">\r\n                        <h3>Get In Touch</h3>\r\n                        <p>Got something to share? Fill out our quick and easy contact form. We promise to get back to you promptly.</p>\r\n                        <div className=\"FontIcon\">\r\n                            {/* <img src={Map} className=\"Icon\" alt=\"map-icon\"/> */}\r\n                            {/* <FontAwesomeIcon icon={faMapPin} className=\"Icon\"/> */}\r\n                            <p> > 123 T-Shirt Avenue, Dundalk City, Ireland</p>\r\n                        </div>\r\n                        <div className=\"FontIcon\">\r\n                            {/* <FontAwesomeIcon icon={faEnvelope} className=\"Icon\"/> */}\r\n                            <p> > info@shirtstore.com</p>\r\n                        </div>\r\n                        <div className=\"FontIcon\">\r\n\r\n                            {/* <FontAwesomeIcon icon={faPhone} className=\"Icon\"/> */}\r\n                            <p> > +353 (555) 123-4567</p>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"fromContainer\">\r\n                        <form>\r\n                            <h2>Contact Us</h2>\r\n                            <div className=\"ContainerInForm\">\r\n                                <div className=\"inputContainer\">\r\n                                    <input type=\"text\" id=\"input-fname\" placeholder=\"First Name\" />\r\n                                    <input type=\"text\" id=\"input-lname\" placeholder=\"Last Name\" />\r\n                                    <input type=\"text\" id=\"input-email\" placeholder=\"Email Address\" />\r\n                                </div>\r\n                                <div className=\"TextareaMessage\">\r\n                                    <textarea name=\"message\" type=\"text\" id=\"input-message\" placeholder=\"Some Text....\" rows=\"10\" cols=\"25\"></textarea>\r\n                                    {/* <input type=\"Submit\" value=\"Submit\" id=\"input-submit\" className=\"blue-button\"></input> */}\r\n                                </div>\r\n                                <div className=\"submit\">\r\n                                    <input type=\"Submit\" value=\"Submit\" id=\"input-submit\" className=\"blue-button\"></input>\r\n                                </div>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n                <div className=\"map-container\">\r\n                    <div className=\"iframe\">\r\n                        <iframe className=\"map\"\r\n                            width=\"1400\"\r\n                            height=\"400\"\r\n                            src=\"https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2346.0896366061343!2d-6.397746387676642!3d53.9834322267499!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x4860cc13fd48d593%3A0x5d57f3d367d24b6e!2sDundalk%20I.T%20(Main%20Gate)!5e0!3m2!1sen!2sie!4v1707436708839!5m2!1sen!2sie\"\r\n                            title=\"GeeksforGeeks\" >\r\n                        </iframe>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}","// import React, {Component} from \"react\"\r\n// import axios from \"axios\"\r\n// import {Redirect} from \"react-router-dom\"\r\n\r\n// import {SANDBOX_CLIENT_ID, SERVER_HOST} from \"../config/global_constants\"\r\n// import PayPalMessage from \"./PayPalMessage\"\r\n// import {PayPalButtons, PayPalScriptProvider} from \"@paypal/react-paypal-js\"\r\n\r\n\r\n// export default class BuyShirt extends Component\r\n// {\r\n//     constructor(props)\r\n//     {\r\n//         super(props)\r\n\r\n//         this.state = {redirectToPayPalMessage:false,\r\n//                       payPalMessageType:null,\r\n//                       payPalOrderID:null}\r\n//     }\r\n\r\n\r\n\r\n//     createOrder = (data, actions) => \r\n//     {\r\n//         return actions.order.create({purchase_units:[{amount:{value:this.props.price}}]})\r\n//     }\r\n\r\n\r\n//     onApprove = paymentData =>\r\n//     {      \r\n//         axios.post(`${SERVER_HOST}/sales/${paymentData.orderID}/${this.props.shirtID}/${this.props.price}`, {headers:{\"authorization\":localStorage.token, \"Content-type\": \"multipart/form-data\"}})\r\n//         .then(res => \r\n//         {                   \r\n//             this.setState({payPalMessageType:PayPalMessage.messageType.SUCCESS, \r\n//                            payPalOrderID:paymentData.orderID, \r\n//                            redirectToPayPalMessage:true}) \r\n//         })\r\n//         .catch(errorData =>\r\n//         {           \r\n//             this.setState({payPalMessageType:PayPalMessage.messageType.ERROR, \r\n//                            redirectToPayPalMessage:true}) \r\n//         })\r\n//     }\r\n\r\n\r\n//     onError = errorData => \r\n//     {\r\n//         this.setState({payPalMessageType:PayPalMessage.messageType.ERROR, \r\n//                        redirectToPayPalMessage:true})         \r\n//     }\r\n\r\n\r\n//     onCancel = cancelData => \r\n//     {\r\n//         // The user pressed the Paypal checkout popup window cancel button or closed the Paypal checkout popup window\r\n//         this.setState({payPalMessageType:PayPalMessage.messageType.CANCEL, \r\n//                        redirectToPayPalMessage:true})       \r\n//     }\r\n\r\n\r\n\r\n//     render()\r\n//     {\r\n//         return (\r\n//             <div>\r\n//                 {this.state.redirectToPayPalMessage ? <Redirect to= {`/PayPalMessage/${this.state.payPalMessageType}/${this.state.payPalOrderID}`}/> : null}            \r\n\r\n//                 <PayPalScriptProvider options={{currency:\"EUR\", \"client-id\":SANDBOX_CLIENT_ID }}>\r\n//                     <PayPalButtons style={{layout: \"horizontal\"}} createOrder={this.createOrder} onApprove={this.onApprove} onError={this.onError} onCancel={this.onCancel}/>\r\n//                 </PayPalScriptProvider>\r\n//             </div>\r\n//     )}\r\n// }\r\n\r\n\r\nimport React, { Component } from \"react\"\r\nimport axios from \"axios\"\r\nimport { Redirect } from \"react-router-dom\"\r\n\r\nimport { SANDBOX_CLIENT_ID, SERVER_HOST } from \"../config/global_constants\"\r\nimport PayPalMessage from \"./PayPalMessage\"\r\nimport { PayPalButtons, PayPalScriptProvider } from \"@paypal/react-paypal-js\"\r\n\r\n\r\nexport default class BuyShirt extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            redirectToPayPalMessage: false,\r\n            payPalMessageType: null,\r\n            payPalOrderID: null\r\n        }\r\n    }\r\n    createOrder = (data, actions) => {\r\n        return actions.order.create({ purchase_units: [{ amount: { value: this.props.price } }] })\r\n    }\r\n\r\n\r\n    onApprove = paymentData => {\r\n        // console.log(\"PayPal payment successful\") \r\n        // let formData = new FormData()\r\n        // formData.append(\"items\", this.props.items)\r\n        // formData.append(\"customerName\", this.props.customerName)\r\n        // formData.append(\"customerEmail\", this.props.customerEmail)\r\n        // formData.append(\"address\", this.props.address)\r\n        // formData.append(\"phone\", this.props.phone)\r\n        console.log(this.props.items)\r\n        console.log(this.props.customerName)\r\n        console.log(this.props.customerEmail)\r\n        console.log(this.props.address)\r\n        console.log(this.props.phone)\r\n        // console.log(formData);\r\n        let inputData = { items: this.props.items, customerName: this.props.customerName, customerEmail: this.props.customerEmail, address: this.props.address, phone: this.props.phone }\r\n        console.log(inputData)\r\n        // axios.post(`${SERVER_HOST}/sales/${paymentData.orderID}/${this.props.price}/${this.props.items}/${this.props.customerName}/${this.props.customerEmail}/${this.props.address}/${this.props.phone}`, {headers:{\"authorization\":localStorage.token, \"Content-type\": \"multipart/form-data\"}})\r\n        // .then(res => \r\n        // {                   \r\n        //     this.setState({payPalMessageType:PayPalMessage.messageType.SUCCESS, \r\n        //                    payPalOrderID:paymentData.orderID, \r\n        //                    redirectToPayPalMessage:true}) \r\n        // })\r\n        // axios.post(`${SERVER_HOST}/sales/${paymentData.orderID}/${this.props.price}`, {headers:{\"authorization\":localStorage.token, \"Content-type\": \"multipart/form-data\"}})\r\n        // .then(res => \r\n        // {                   \r\n        //     this.setState({payPalMessageType:PayPalMessage.messageType.SUCCESS, \r\n        //                    payPalOrderID:paymentData.orderID, \r\n        //                    redirectToPayPalMessage:true}) \r\n        // })\r\n        // axios.post(`${SERVER_HOST}/sales/${paymentData.orderID}/${this.props.price}`,formData, {headers:{\"authorization\":localStorage.token, \"Content-type\": \"multipart/form-data\"}})\r\n        // .then(res => \r\n        // {                   \r\n        //     this.setState({payPalMessageType:PayPalMessage.messageType.SUCCESS, \r\n        //                    payPalOrderID:paymentData.orderID, \r\n        //                    redirectToPayPalMessage:true}) \r\n        // })\r\n        axios.post(`${SERVER_HOST}/sales/${paymentData.orderID}/${this.props.price}`, { items: this.props.items, customerName: this.props.customerName, customerEmail: this.props.customerEmail, address: this.props.address, phone: this.props.phone }, { headers: { \"authorization\": localStorage.token, \"Content-type\": \"application/json\" } })\r\n            .then(res => {\r\n                this.setState({\r\n                    payPalMessageType: PayPalMessage.messageType.SUCCESS,\r\n                    payPalOrderID: paymentData.orderID,\r\n                    redirectToPayPalMessage: true\r\n                })\r\n            })\r\n            .catch(errorData => {\r\n                this.setState({\r\n                    payPalMessageType: PayPalMessage.messageType.ERROR,\r\n                    redirectToPayPalMessage: true\r\n                })\r\n            })\r\n    }\r\n\r\n\r\n    onError = errorData => {\r\n        console.log(\"PayPal payment error\")\r\n        this.setState({\r\n            payPalMessageType: PayPalMessage.messageType.ERROR,\r\n            redirectToPayPalMessage: true\r\n        })\r\n    }\r\n\r\n\r\n    onCancel = cancelData => {\r\n        console.log(\"PayPal payment cancelled\")\r\n        // The user pressed the Paypal checkout popup window cancel button or closed the Paypal checkout popup window\r\n        this.setState({\r\n            payPalMessageType: PayPalMessage.messageType.CANCEL,\r\n            redirectToPayPalMessage: true\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.state.redirectToPayPalMessage ? <Redirect to={`/PayPalMessage/${this.state.payPalMessageType}/${this.state.payPalOrderID}`} /> : null}\r\n                <PayPalScriptProvider options={{ currency: \"EUR\", \"client-id\": SANDBOX_CLIENT_ID }}>\r\n                    <div className=\"paypal-outer-container\">\r\n                        <PayPalButtons style={{ layout: \"horizontal\" }} createOrder={this.createOrder} onApprove={this.onApprove} onError={this.onError} onCancel={this.onCancel} />\r\n                    </div>\r\n                </PayPalScriptProvider>\r\n            </div>\r\n        )\r\n    }\r\n}","// import React, { Component } from \"react\"\r\n// import Form from \"react-bootstrap/Form\"\r\n\r\n// import axios from \"axios\"\r\n\r\n// export default class ShoppingCart extends Component {\r\n//     constructor(props){\r\n//         this.state = {\r\n//             items: [], \r\n//             totalPrice: 0 \r\n//         };\r\n//     }\r\n\r\n//     addItemToCart = (item) => {\r\n//         const updatedItems = [...this.state.items, item];\r\n//         const totalPrice = this.state.totalPrice + (item.price * item.quantity);\r\n//         this.setState({ items: updatedItems, totalPrice });\r\n//     };\r\n\r\n//     render() {\r\n//         const { items, totalPrice } = this.state;\r\n//         const { itemsInCart } = this.props.location.state;\r\n\r\n//         return (\r\n//             <div>\r\n//                 <h2>Shopping Cart</h2>\r\n//                 <ul>\r\n//                     {items.map((item, index) => (\r\n//                         <li key={index}>\r\n//                             {item.name} - Quantity: {item.quantity} - Price: ${item.price * item.quantity}\r\n//                         </li>\r\n//                     ))}\r\n//                 </ul>\r\n//                 <p>Total Price: ${totalPrice}</p>\r\n//             </div>\r\n//         );\r\n//     }\r\n// }\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n// import React, { Component } from \"react\";\r\n// import Form from \"react-bootstrap/Form\"\r\n// import NavigationBar from \"./NavigationBar\"\r\n// import { SERVER_HOST } from \"../config/global_constants\"\r\n\r\n// import axios from \"axios\"\r\n\r\n// export default class ShoppingCart extends Component {\r\n//     constructor(props) {\r\n//         super(props)\r\n\r\n//         this.state = {\r\n//             // userId:\"\",\r\n//             name: \"\",\r\n//             size: \"\",\r\n//             price: \"\",\r\n//             quantity: \"\",\r\n//             shirtPhotoFilename: null,\r\n//             // redirectToDisplayAllTShirtInCart: localStorage.accessLevel < ACCESS_LEVEL_ADMIN,\r\n//             wasSubmittedAtLeastOnce: false,\r\n//             cart:[],\r\n//             totalPrice:0\r\n//         }\r\n//     }\r\n//     componentDidMount() {\r\n//         // const { itemsInCart } = this.props.location.state || { itemsInCart: [] };\r\n//         axios.get(`${SERVER_HOST}/cart/`)\r\n//         .then(res => \r\n//         { \r\n//             this.setState({cart: res.data})                                         \r\n//         })\r\n//         .catch(err =>\r\n//         {\r\n//             // do nothing\r\n//         })\r\n\r\n\r\n//         axios.get(`${SERVER_HOST}/cart/${this.props.match.params.id}`, { headers: { \"authorization\": localStorage.token } })\r\n//         .then(res => {\r\n//             this.setState({\r\n//                 name: res.data.name,\r\n//                 // colour: res.data.colour,\r\n//                 size: res.data.size,\r\n//                 price: res.data.price,\r\n//                 quantity: res.data.quantity,\r\n//                 shirtPhotoFilename:res.data.shirtPhotoFilename\r\n//             })\r\n//         })\r\n//         .catch(err => {\r\n//             // do nothing\r\n//         })\r\n\r\n\r\n//         // Update cart state with itemsInCart\r\n//         // this.setState({ cart: itemsInCart });\r\n\r\n//         // Calculate total price\r\n//         let totalPrice = 0;\r\n//         // itemsInCart.forEach(item => {\r\n//         //     totalPrice += item.price * item.quantity;\r\n//         // });\r\n//         this.state.cart.forEach(item => {\r\n//             totalPrice += item.price * item.quantity;\r\n//         })\r\n\r\n//         // Update totalPrice state\r\n//         this.setState({ totalPrice: totalPrice });\r\n\r\n//         // Load shirt photos\r\n//         this.state.cart.forEach(cartItem => {\r\n//             cartItem.shirtPhotoFilename.forEach(photo => {\r\n//                 axios.get(`${SERVER_HOST}/shirts/photo/${photo.filename}`)\r\n//                     .then(res => {\r\n//                         // Update shirt photo in DOM\r\n//                         document.getElementById(photo._id).src = `data:;base64,${res.data.image}`;\r\n//                     })\r\n//                     .catch(err => {\r\n//                         // Handle error\r\n//                     });\r\n//             });\r\n//         });\r\n//     }\r\n\r\n//     // componentDidMount(){\r\n//     //     const { itemsInCart } = this.props.location.state || { itemsInCart: [] };\r\n//     //     this.setState({ cart: itemsInCart });\r\n//     //     let totalPrice = 0;\r\n//     //     itemsInCart.forEach(item => {\r\n//     //         totalPrice += item.price * item.quantity;\r\n//     //     });\r\n//     //     this.setState({ totalPrice: totalPrice });\r\n//     //     this.state.cart.shirtPhotoFilename.map(photo => {\r\n//     //         return axios.get(`${SERVER_HOST}/shirts/photo/${photo.filename}`)\r\n//     //             .then(res => {\r\n//     //                 document.getElementById(photo._id).src = `data:;base64,${res.data.image}`\r\n//     //             })\r\n//     //             .catch(err => {\r\n//     //                 // do nothing\r\n//     //             })\r\n//     //     })\r\n//         // let formData = new FormData()\r\n//         // formData.append(\"userId\", this.state.stock)\r\n//         // formData.append(\"name\", this.state.name)\r\n//         // // formData.append(\"colour\", this.state.colour)\r\n//         // formData.append(\"size\", this.state.size)\r\n//         // formData.append(\"price\", this.state.price)\r\n//         // formData.append(\"quantity\", this.state.quantity)\r\n\r\n\r\n//         // if (this.state.cart.shirtPhotoFilename) {\r\n//         //     for (let i = 0; i < this.state.cart.shirtPhotoFilename.length; i++) {\r\n//         //         formData.append(\"cartPhotos\", this.state.cart.shirtPhotoFilename[i])\r\n//         //     }\r\n//         // }\r\n\r\n//         // axios.post(`${SERVER_HOST}/cart`, formData, { headers: { \"authorization\": localStorage.token, \"Content-type\": \"multipart/form-data\" } })\r\n//         //     .then(res => {\r\n//         //         this.setState({ redirectToDisplayAllTShirtInCart: true })\r\n//         //     })\r\n//         //     .catch(err => {\r\n//         //         this.setState({ wasSubmittedAtLeastOnce: true })\r\n//         //     })\r\n//     //}\r\n//     render() {\r\n// console.log(this.state.cart)\r\n//         return (\r\n//             <div>\r\n//                 <NavigationBar />\r\n//                 <h2>Shopping Cart</h2>\r\n//                 {/* <div>\r\n//                     {this.state.cart.shirtPhotoFilename === null ? null : <div className=\"shirtPhotos\">{this.state.cart.shirtPhotoFilename.map(photo => <img key={photo._id} id={photo._id} alt=\"\" />)}</div>}\r\n//                 </div> */}\r\n//                 {/* <ul>\r\n//                     {this.state.cart.map((item, index) => (\r\n//                         <li key={index}>\r\n//                             {item.name} - Quantity: {item.quantity} - Price: €{item.price * item.quantity}\r\n//                         </li>\r\n//                     ))}\r\n//                 </ul> */}\r\n//                 <p>Total Price: €{this.state.totalPrice}</p>\r\n//             </div>\r\n//         );\r\n//     }\r\n// }\r\n\r\n\r\n\r\n\r\n\r\nimport React, { Component } from \"react\";\r\nimport NavigationBar from \"./NavigationBar\";\r\nimport { ACCESS_LEVEL_NORMAL_USER, SERVER_HOST } from \"../config/global_constants\"\r\nimport axios from \"axios\";\r\nimport BuyShirt from \"./BuyShirt\";\r\nimport { Link } from \"react-router-dom\"\r\n\r\n\r\nexport default class ShoppingCart extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            // name:\"\",\r\n            // price:\"\",\r\n            // quantity:\"\",\r\n            // size:\"\",\r\n            cart: [],\r\n            user: {},\r\n            guestName: \"\",\r\n            guestEmail: \"\",\r\n            guestAddress: \"\",\r\n            guestPhone: \"\",\r\n            isGuest: localStorage.accessLevel < ACCESS_LEVEL_NORMAL_USER,\r\n            haveEnoughData: false,\r\n            errors: {\r\n                guestName: \"\",\r\n                guestEmail: \"\",\r\n                guestAddress: \"\",\r\n                guestPhone: \"\"\r\n            }\r\n            // totalPrice: 0\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        // Fetch cart data from the server\r\n        const cartLocalStorage = JSON.parse(localStorage.getItem(\"itemsInCart\") || \"[]\");\r\n\r\n        // console.log(\"itemsInCart: \",localStorage.getItem(\"itemsInCart\").forEach(item=>{item.shirtPhotoFilename}))\r\n\r\n        if (cartLocalStorage.some(item => item.quantity > item.stock)) {\r\n            // Update quantity to match stock if quantity exceeds stock\r\n            const updatedCart = cartLocalStorage.map(item => ({\r\n                ...item,\r\n                quantity: Math.min(item.quantity, item.stock)\r\n            }));\r\n            this.setState({ cart: updatedCart }, () => {\r\n                // Update localStorage with corrected cart data\r\n                localStorage.setItem(\"itemsInCart\", JSON.stringify(updatedCart));\r\n                // Load shirt photos after updating state\r\n                this.loadShirtPhotos();\r\n            });\r\n        } else {\r\n            // No need to update quantity, proceed with loading shirt photos\r\n            this.setState({ cart: cartLocalStorage }, () => {\r\n                // Load shirt photos after updating state\r\n                this.loadShirtPhotos();\r\n            });\r\n        }\r\n\r\n\r\n        let userEmail = JSON.parse(localStorage.getItem(\"userEmail\") || null);\r\n\r\n        axios.get(`${SERVER_HOST}/users/email?email=${userEmail}`)\r\n            .then(res => {\r\n                this.setState({ user: res.data });\r\n            })\r\n            .catch(err => {\r\n                console.error(\"Error fetching user data:\", err);\r\n            });\r\n\r\n        const { state } = this.props.location;\r\n        if (state && state.haveEnoughData === true) {\r\n            this.setState({ haveEnoughData: true })\r\n        }\r\n\r\n\r\n\r\n        // this.props.shirt.shirtPhotoFilename.map(photo => {\r\n        //     return axios.get(`${SERVER_HOST}/shirts/photo/${photo.filename}`)\r\n        //         .then(res => {\r\n        //             document.getElementById(photo._id).src = `data:;base64,${res.data.image}`\r\n        //         })\r\n        //         .catch(err => {\r\n        //             // do nothing\r\n        //         })\r\n        // })\r\n\r\n        // this.state.cart.map(item=>{item.shirtPhotoFilename.map(photo => {\r\n        //     return axios.get(`${SERVER_HOST}/shirts/photo/${photo.filename}`)\r\n        //         .then(res => {\r\n        //             document.getElementById(photo._id).src = `data:;base64,${res.data.image}`\r\n        //         })\r\n        //         .catch(err => {\r\n        //             // do nothing\r\n        //         })\r\n        // })})\r\n\r\n        // this.setState({ cart: cartLocalStorage }, () => {\r\n        //     // Calculate total price after updating state\r\n        //     this.calculateTotalPrice();\r\n        // });\r\n\r\n        // console.log(this.state.cart[0])\r\n        //         let totalPrice = 0;\r\n        //         this.state.cart.map(item => {\r\n        //             console.log(item)\r\n        //                         totalPrice += item.price * item.quantity;\r\n        //                     });\r\n        //                     // Update totalPrice state\r\n        //                     this.setState({ totalPrice: totalPrice });\r\n        // axios.get(`${SERVER_HOST}/cart`, { headers: { \"authorization\": localStorage.token } })\r\n        //     .then(res => {\r\n        //         // Update state with fetched cart data\r\n        //         this.setState({ cart: res.data }, () => {\r\n        //             // Calculate total price after updating state\r\n        //             this.calculateTotalPrice();\r\n        //             // Load shirt photos after updating state\r\n        //             // this.loadShirtPhotos();\r\n        //         });\r\n        //     })\r\n        //     .catch(err => {\r\n        //         // Handle error\r\n        //         console.error(\"Error fetching cart data:\", err);\r\n        //     });\r\n    }\r\n    // componentDidUpdate(){\r\n    //     if (this.state.cart !== undefined) {\r\n    //         const groupedItems = this.state.cart.reduce((groups, item) => {\r\n    //             const group = groups.find(g => g.name === item.name);\r\n    //             if (group) {\r\n    //                 group.quantity += item.quantity;\r\n    //                 group.totalPrice += item.price * item.quantity;\r\n    //             } else {\r\n    //                 groups.push({\r\n    //                     name: item.name,\r\n    //                     size: item.size,\r\n    //                     quantity: item.quantity,\r\n    //                     price: item.price,\r\n    //                     totalPrice: item.price * item.quantity\r\n    //                 });\r\n    //             }\r\n    //             return groups;\r\n    //         }, []);\r\n    //         localStorage.setItem(\"itemsInCart\", JSON.stringify(groupedItems));\r\n    //     }\r\n    // }\r\n    loadShirtPhotos() {\r\n        // Loop through each cart item and load its shirt photos\r\n        this.state.cart.forEach(item => {\r\n            item.shirtPhotoFilename.forEach(photo => {\r\n                axios.get(`${SERVER_HOST}/shirts/photo/${photo.filename}`)\r\n                    .then(res => {\r\n                        // Update shirt photo in DOM\r\n                        document.getElementById(photo._id).src = `data:;base64,${res.data.image}`;\r\n                    })\r\n                    .catch(err => {\r\n                        // Handle error\r\n                        console.error(\"Error loading shirt photo:\", err);\r\n                    });\r\n            });\r\n        });\r\n    }\r\n    calculateTotalPrice() {\r\n        let totalPrice = 0;\r\n        // Calculate total price based on cart items\r\n        // this.state.cart.forEach(item => {\r\n        //     const carItem=item.cartItems[0];\r\n        //     totalPrice += carItem.price * carItem.quantity;\r\n        // });\r\n        // // Update totalPrice state\r\n        // this.setState({ totalPrice: totalPrice });\r\n        this.state.cart.map(item => {\r\n            totalPrice += item.price * item.quantity;\r\n        });\r\n        // Update totalPrice state\r\n        // this.setState({ totalPrice: totalPrice });\r\n        return totalPrice.toFixed(2);\r\n    }\r\n    getIdAndQuantity() {\r\n        let items = []\r\n        this.state.cart.map(cartItem => {\r\n            items.push({ shirtID: cartItem.shirtId, quantity: cartItem.quantity })\r\n        });\r\n        return items;\r\n\r\n    }\r\n    handleChange = (index, field, value) => {\r\n        const updatedCart = [...this.state.cart];\r\n        const currentItem = updatedCart[index];\r\n\r\n        // Check if the new quantity exceeds the stock\r\n        if (field === 'quantity' && value > currentItem.stock) {\r\n            // If it does, set the quantity to the maximum available stock\r\n            value = currentItem.stock;\r\n        }\r\n\r\n        // Update the quantity or other fields as usual\r\n        updatedCart[index][field] = value;\r\n        this.setState({ cart: updatedCart });\r\n\r\n        // localStorage.setItem(\"itemsInCart\", JSON.stringify(updatedCart));\r\n        const groupedItems = updatedCart.reduce((groups, item) => {\r\n            const group = groups.find(g => g.name === item.name);\r\n            if (group) {\r\n                group.quantity += item.quantity;\r\n                group.totalPrice += item.price * item.quantity;\r\n            } else {\r\n                groups.push({\r\n                    shirtId: item.shirtId,\r\n                    name: item.name,\r\n                    size: item.size,\r\n                    quantity: item.quantity,\r\n                    price: item.price,\r\n                    totalPrice: item.price * item.quantity,\r\n                    shirtPhotoFilename: item.shirtPhotoFilename,\r\n                    stock: item.stock\r\n                });\r\n            }\r\n            return groups;\r\n        }, []);\r\n        this.setState({ cart: groupedItems });\r\n        localStorage.setItem(\"itemsInCart\", JSON.stringify(groupedItems));\r\n    };\r\n\r\n\r\n    handleDelete = (name, size) => {\r\n        const updatedCart = this.state.cart.filter(item => !(item.name === name && item.size === size));\r\n        this.setState({ cart: updatedCart });\r\n        localStorage.setItem(\"itemsInCart\", JSON.stringify(updatedCart));\r\n        this.loadShirtPhotos();\r\n    };\r\n\r\n    handleGuest = (field, value) => {\r\n        this.setState({ [field]: value });\r\n    };\r\n\r\n    // handlePayment = () => {\r\n    //     // Check if all guest details are provided\r\n    //     const { guestName, guestEmail, guestAddress, guestPhone } = this.state;\r\n    //     const errors = {};\r\n    //     if (!guestName.trim()) {\r\n    //         errors.guestName = \"Name is required\";\r\n    //     }\r\n    //     if (!guestEmail.trim()) {\r\n    //         errors.guestEmail = \"Email is required\";\r\n    //     } else if (!/\\S+@\\S+\\.\\S+/.test(guestEmail)) {\r\n    //         errors.guestEmail = \"Email is invalid\";\r\n    //     }\r\n    //     if (!guestAddress.trim()) {\r\n    //         errors.guestAddress = \"Address is required\";\r\n    //     }\r\n    //     if (!guestPhone.trim()) {\r\n    //         errors.guestPhone = \"Phone number is required\";\r\n    //     } else if (!/^\\d{10}$/.test(guestPhone)) {\r\n    //         errors.guestPhone = \"Phone number must be 10 digits\";\r\n    //     }\r\n    //     // if (Object.keys(errors).length === 0) {\r\n    //     // if (guestName && guestEmail && guestAddress && guestPhone {\r\n    //     if (guestName && guestEmail && guestAddress && guestPhone && Object.keys(errors).length === 0) {\r\n    //         // Proceed with payment\r\n    //         console.log(\"Guest details provided. Proceeding with payment...\");\r\n    //         // Call your payment function or component here\r\n    //         this.setState({ haveEnoughData: true })\r\n    //     } else {\r\n    //         // Display error message or handle accordingly\r\n    //         console.log(\"Please provide all guest details before proceeding with payment.\");\r\n    //     }\r\n    // };\r\n\r\n    // submitGuestDetail=()=>{\r\n    //     if(this.state.guestName&&this.state.guestEmail&&this.state.guestAddress&&this.state.guestPhone){\r\n    //         this.setState({haveEnoughData:true})\r\n    //     }\r\n    // }\r\n    submitGuestDetail = () => {\r\n        const { guestName, guestEmail, guestAddress, guestPhone } = this.state;\r\n        const errors = {};\r\n\r\n        // Validate guestEmail\r\n        if (!guestEmail.trim()) {\r\n            errors.guestEmail = \"Email is required\";\r\n        } else if (!/\\S+@\\S+\\.\\S+/.test(guestEmail)) {\r\n            errors.guestEmail = \"Email is invalid\";\r\n        }\r\n\r\n        // Validate guestAddress\r\n        if (!guestAddress.trim()) {\r\n            errors.guestAddress = \"Address is required\";\r\n        }\r\n\r\n        // Validate guestPhone\r\n        if (!guestPhone.trim()) {\r\n            errors.guestPhone = \"Phone number is required\";\r\n        } else if (!/^\\d{8,15}$/.test(guestPhone)) {\r\n            errors.guestPhone = \"Phone number must be between 8 and 15 digits\";\r\n        }\r\n\r\n        // Check if there are any errors\r\n        if (Object.keys(errors).length === 0) {\r\n            // No errors, proceed with submission\r\n            this.setState({ haveEnoughData: true, errors: {} }); // Reset errors\r\n        } else {\r\n            // Errors found, update state with error messages\r\n            this.setState({ errors });\r\n        }\r\n    };\r\n\r\n\r\n    render() {\r\n        console.log(this.state.user)\r\n        console.log(this.state.cart)\r\n        // console.log(this.state.cart[0])\r\n        // {this.state.cart !== undefined ? this.calculateTotalPrice() : null}\r\n\r\n        // console.log(this.state.cart.map((item,index) => (item.cartItems[0].name)));\r\n        const groupedItems = this.state.cart.reduce((groups, item) => {\r\n            const group = groups.find(g => g.name === item.name);\r\n            if (group) {\r\n                group.quantity += item.quantity;\r\n                group.totalPrice += item.price * item.quantity;\r\n            } else {\r\n                groups.push({\r\n                    shirtId: item.shirtId,\r\n                    name: item.name,\r\n                    size: item.size,\r\n                    quantity: item.quantity,\r\n                    price: item.price,\r\n                    totalPrice: item.price * item.quantity,\r\n                    shirtPhotoFilename: item.shirtPhotoFilename,\r\n                    shirtPhotoFilename: item.shirtPhotoFilename,\r\n                    stock: item.stock\r\n                });\r\n            }\r\n            return groups;\r\n        }, []);\r\n        // console.log(this.state.cart.map(item => item.shirtPhotoFilename[0]))\r\n\r\n        // this.state.cart.map(item =>\r\n        //     item.shirtPhotoFilename[0].forEach(photo => { // Use forEach to iterate over each object\r\n        //         axios.get(`${SERVER_HOST}/shirts/photo/${photo.filename}`)\r\n        //             .then(res => {\r\n        //                 document.getElementById(photo._id).src = `data:;base64,${res.data.image}`\r\n        //             })\r\n        //             .catch(err => {\r\n        //                 // Handle error\r\n        //                 console.error(\"Error loading shirt photo:\", err);\r\n        //             });\r\n        //     })\r\n        // );\r\n        console.log(this.state.cart)\r\n        return (\r\n            <div>\r\n                <NavigationBar />\r\n                <h2 className=\"shoppingcarth2\">Shopping Cart</h2>\r\n                {this.state.cart.length === 0 ? <h2>Shopping Cart is currently empty</h2> :\r\n                    <div className=\"cart-container\">\r\n                        {this.state.cart.map((item, index) => (\r\n                            <div key={index} className=\"each-item-cart\">\r\n                                <div className=\"photoanddetailsSC\">\r\n                                    {/* display shirt photo */}\r\n                                    {item.shirtPhotoFilename.map(photo => (\r\n                                        <img key={photo._id} id={photo._id} alt=\"\" />\r\n                                    ))}\r\n                                    <div className=\"detailsShoppingCart\">\r\n                                        {/* <img src={`${SERVER_HOST}/shirts/photo/${item.shirtPhotoFilename}`} alt=\"Shirt\" style={{ width: '100px', height: '100px' }} /> */}\r\n                                        {/* <img src={`${SERVER_HOST}/shirts/photo/${item.shirtPhotoFilename}`} alt=\"Shirt\" /> */}\r\n                                        {/* {console.log(\"shirtPhotoFilename: \", item.shirtPhotoFilename)} */}\r\n                                        <h3 className=\"h3shoppingcart\">{item.name} </h3>\r\n                                        <select className=\"selectshoppingcart\"\r\n                                            value={item.size}\r\n                                            onChange={e => this.handleChange(index, 'size', e.target.value)}\r\n                                        >\r\n                                            <option value=\"XS\">XS</option>\r\n                                            <option value=\"S\">S</option>\r\n                                            <option value=\"M\">M</option>\r\n                                            <option value=\"L\">L</option>\r\n                                            <option value=\"XL\">XL</option>\r\n                                        </select>\r\n                                        {/* <span>Quantity:</span> */}\r\n\r\n                                        <div className=\"shoppingcartshirtprice\">€{item.price}</div>\r\n\r\n                                        <div className=\"buttonDivShoppingCart\">\r\n                                            <button onClick={() => this.handleChange(index, 'quantity', Math.max(1, item.quantity - 1))}>-</button>\r\n                                            <span className=\"shoppingcartspan\">{item.quantity}</span>\r\n                                            <button onClick={() => this.handleChange(index, 'quantity', item.quantity + 1)}>+</button>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"shoppingcartdeletebutton\">\r\n                                    <button onClick={() => this.handleDelete(item.name, item.size)}>Remove</button>\r\n                                </div>\r\n\r\n                            </div>\r\n\r\n                        ))}\r\n                        {this.state.isGuest && this.state.haveEnoughData == false ?\r\n                            <div className=\"guest-details\">\r\n                                <div className=\"gfirst\">\r\n                                    <h3>Guest Details</h3>\r\n                                </div>\r\n                                <div className=\"gsecond\">\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        placeholder=\"Name\"\r\n                                        value={this.state.guestName}\r\n                                        onChange={e => this.handleGuest('guestName', e.target.value)}\r\n                                        required //required/*  */\r\n                                    />\r\n                                    <input\r\n                                        type=\"email\"\r\n                                        placeholder=\"Email\"\r\n                                        value={this.state.guestEmail}\r\n                                        onChange={e => this.handleGuest('guestEmail', e.target.value)}\r\n                                        required\r\n                                    />\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        placeholder=\"Address\"\r\n                                        value={this.state.guestAddress}\r\n                                        onChange={e => this.handleGuest('guestAddress', e.target.value)}\r\n                                        required\r\n                                    />\r\n                                    <input\r\n                                        type=\"text\"\r\n                                        placeholder=\"Phone\"\r\n                                        value={this.state.guestPhone}\r\n                                        onChange={e => this.handleGuest('guestPhone', e.target.value)}\r\n                                        required\r\n                                    />\r\n                                </div>\r\n                                <div className=\"gthird\">\r\n                                    <button onClick={this.submitGuestDetail}>Submit</button>\r\n                                </div>\r\n                            </div>\r\n                            : null}\r\n\r\n\r\n                        {this.state.isGuest ? (this.state.haveEnoughData) ? <BuyShirt customerEmail={this.state.guestEmail} customerName={this.state.guestName} address={this.state.guestAddress} phone={this.state.guestPhone} items={this.getIdAndQuantity()} price={this.calculateTotalPrice()} />\r\n                            : <h6 className=\"pleasefillguest\">Please fill in the details above</h6> : ((this.state.user.name && this.state.user.email && this.state.user.phone && this.state.user.address) || this.state.haveEnoughData) ? <BuyShirt customerEmail={this.state.user.email} customerName={this.state.user.name} address={this.state.user.address} phone={this.state.user.phone} items={this.getIdAndQuantity()} price={this.calculateTotalPrice()} />\r\n                            : <Link className=\"green-button\" to={{ pathname: \"/Dashboard\", state: { from: \"cart\" } }}>Please finish your profile</Link>}\r\n                        {this.state.errors.guestEmail && <h6 className=\"error\">{this.state.errors.guestEmail}</h6>}\r\n                        {this.state.errors.guestAddress && <h6 className=\"error\">{this.state.errors.guestAddress}</h6>}\r\n                        {this.state.errors.guestPhone && <h6 className=\"error\">{this.state.errors.guestPhone}</h6>}\r\n                        {/* {this.state.haveEnoughData?{/* paypalbutton */}\r\n                        {/* <BuyShirt customerEmail={this.state.guestEmail} customerName={this.state.guestName} address={this.state.guestAddress} phone={this.state.guestPhone} items={this.getIdAndQuantity()} price={this.calculateTotalPrice()} /> */}\r\n\r\n\r\n\r\n\r\n                    </div>\r\n                }\r\n                <div className=\"totalPriceShoppingCart\">\r\n                    {this.state.cart !== undefined ? <p>Total Price: ${this.calculateTotalPrice()}</p> : null}\r\n                </div>\r\n                {/* <p>Total Price: €{this.state.totalPrice}</p> */}\r\n\r\n\r\n            </div>\r\n        );\r\n    }\r\n\r\n}\r\n\r\n","import React, { Component } from \"react\"\r\nimport { Redirect, Link } from \"react-router-dom\"\r\nimport Form from \"react-bootstrap/Form\"\r\n\r\nimport axios from \"axios\"\r\n\r\nimport LinkInClass from \"../components/LinkInClass\"\r\n\r\nimport { ACCESS_LEVEL_ADMIN, SERVER_HOST } from \"../config/global_constants\"\r\n\r\n\r\nexport default class AddTShirt extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            name: \"\",\r\n            // colour: \"\",\r\n            size: \"\",\r\n            price: \"\",\r\n            // quantity: \"\",\r\n            stock: \"\",\r\n            description: \"\",\r\n            shirtPhotoFilename: null,\r\n            gender: \"\",\r\n            redirectToDisplayAllShirts: localStorage.accessLevel < ACCESS_LEVEL_ADMIN,\r\n            wasSubmittedAtLeastOnce: false\r\n        }\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        this.inputToFocus.focus()\r\n    }\r\n\r\n\r\n    handleChange = (e) => {\r\n        this.setState({ [e.target.name]: e.target.value })\r\n    }\r\n\r\n\r\n    handleFileChange = (e) => {\r\n        this.setState({ shirtPhotoFilename: e.target.files })\r\n    }\r\n\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault()\r\n\r\n        let formData = new FormData()\r\n        formData.append(\"name\", this.state.name)\r\n        // formData.append(\"colour\", this.state.colour)\r\n        formData.append(\"size\", this.state.size)\r\n        formData.append(\"price\", this.state.price)\r\n        formData.append(\"stock\", this.state.stock)\r\n        formData.append(\"description\", this.state.description)\r\n        formData.append(\"gender\", this.state.gender)\r\n        console.log(this.state.shirtPhotoFilename)\r\n        if (this.state.shirtPhotoFilename) {\r\n            for (let i = 0; i < this.state.shirtPhotoFilename.length; i++) {\r\n                formData.append(\"shirtPhotos\", this.state.shirtPhotoFilename[i])\r\n            }\r\n        }\r\n\r\n        axios.post(`${SERVER_HOST}/shirts`, formData, { headers: { \"authorization\": localStorage.token, \"Content-type\": \"multipart/form-data\" } })\r\n            .then(res => {\r\n                this.setState({ redirectToDisplayAllShirts: true })\r\n            })\r\n            .catch(err => {\r\n                this.setState({ wasSubmittedAtLeastOnce: true })\r\n            })\r\n    }\r\n\r\n\r\n    render() {\r\n        let errorMessage = \"\";\r\n        if (this.state.wasSubmittedAtLeastOnce) {\r\n            errorMessage = <div className=\"error\">Error: All fields must be filled in<br /></div>;\r\n        }\r\n\r\n        return (\r\n            <div className=\"form-container\">\r\n                {this.state.redirectToDisplayAllShirts ? <Redirect to=\"/main\" /> : null}\r\n\r\n                {errorMessage}\r\n\r\n                <Form>\r\n                    <Form.Group controlId=\"name\">\r\n                        <Form.Label>Name</Form.Label>\r\n                        <Form.Control ref={(input) => { this.inputToFocus = input }} type=\"text\" name=\"name\" value={this.state.name} onChange={this.handleChange} />\r\n                    </Form.Group>\r\n\r\n                    {/* <Form.Group controlId=\"colour\">\r\n                        <Form.Label>Colour</Form.Label>\r\n                        <Form.Control type=\"text\" name=\"colour\" value={this.state.colour} onChange={this.handleChange} />\r\n                    </Form.Group> */}\r\n\r\n                    <Form.Group controlId=\"size\">\r\n                        <Form.Label>Size</Form.Label>\r\n                        <Form.Control as=\"fieldset\">\r\n                            <Form.Check\r\n                                inline\r\n                                type=\"radio\"\r\n                                label=\"XS\"\r\n                                name=\"size\"\r\n                                value=\"XS\"\r\n                                checked={this.state.size === \"XS\"}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                            <Form.Check\r\n                                inline\r\n                                type=\"radio\"\r\n                                label=\"S\"\r\n                                name=\"size\"\r\n                                value=\"S\"\r\n                                checked={this.state.size === \"S\"}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                            <Form.Check\r\n                                inline\r\n                                type=\"radio\"\r\n                                label=\"M\"\r\n                                name=\"size\"\r\n                                value=\"M\"\r\n                                checked={this.state.size === \"M\"}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                            <Form.Check\r\n                                inline\r\n                                type=\"radio\"\r\n                                label=\"L\"\r\n                                name=\"size\"\r\n                                value=\"L\"\r\n                                checked={this.state.size === \"L\"}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                            <Form.Check\r\n                                inline\r\n                                type=\"radio\"\r\n                                label=\"XL\"\r\n                                name=\"size\"\r\n                                value=\"XL\"\r\n                                checked={this.state.size === \"XL\"}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                        </Form.Control>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"gender\">\r\n                        <Form.Label>Gender</Form.Label>\r\n                        <Form.Control as=\"select\" name=\"gender\" value={this.state.gender} onChange={this.handleChange}>\r\n                            <option value=\"\">Select Gender</option>\r\n                            <option value=\"male\">Male</option>\r\n                            <option value=\"female\">Female</option>\r\n                            <option value=\"unisex\">UniSex</option>\r\n                        </Form.Control>\r\n                    </Form.Group>\r\n\r\n                    {/* <Form.Group controlId=\"size\">\r\n                        <Form.Label>Size</Form.Label>\r\n                        <Form.Control type=\"text\" name=\"size\" value={this.state.size} onChange={this.handleChange} />\r\n                    </Form.Group> */}\r\n\r\n                    <Form.Group controlId=\"price\">\r\n                        <Form.Label>Price</Form.Label>\r\n                        <Form.Control type=\"text\" name=\"price\" value={this.state.price} onChange={this.handleChange} />\r\n                    </Form.Group>\r\n\r\n                    {/* <Form.Group controlId=\"quantity\">\r\n                        <Form.Label>Quantity</Form.Label>\r\n                        <Form.Control type=\"text\" name=\"quantity\" value={this.state.quantity} onChange={this.handleChange} />\r\n                    </Form.Group> */}\r\n                    <Form.Group controlId=\"stock\">\r\n                        <Form.Label>Stock</Form.Label>\r\n                        <Form.Control type=\"text\" name=\"stock\" value={this.state.stock} onChange={this.handleChange} />\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"description\">\r\n                        <Form.Label>Description</Form.Label>\r\n                        <Form.Control as=\"textarea\" name=\"description\" value={this.state.description} onChange={this.handleChange} />\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"shirtPhotoFilename\">\r\n                        <Form.Label>Photos</Form.Label>\r\n                        <Form.Control type=\"file\" multiple onChange={this.handleFileChange} />\r\n                    </Form.Group> <br /><br />\r\n\r\n                    <LinkInClass value=\"Add\" className=\"green-button\" onClick={this.handleSubmit} />\r\n\r\n                    <Link className=\"red-button\" to={\"/main\"}>Cancel</Link>\r\n                </Form>\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\n\r\nimport axios from \"axios\"\r\n\r\nimport { ACCESS_LEVEL_GUEST, ACCESS_LEVEL_ADMIN, SERVER_HOST } from \"../config/global_constants\"\r\n\r\nimport BuyShirt from \"./BuyShirt\"\r\n\r\n\r\nexport default class ShirtBlock extends Component {\r\n    componentDidMount() {\r\n        console.log(\"All shirt: \", this.props.shirt)// shows all shirt\r\n        this.props.shirt.shirtPhotoFilename.map(photo => {\r\n            return axios.get(`${SERVER_HOST}/shirts/photo/${photo.filename}`)\r\n                .then(res => {\r\n                    document.getElementById(photo._id).src = `data:;base64,${res.data.image}`\r\n                })\r\n                .catch(err => {\r\n                    // do nothing\r\n                })\r\n        })\r\n    }\r\n\r\n\r\n    render() {\r\n        // let soldOrForSale = null\r\n        // if (localStorage.accessLevel <= ACCESS_LEVEL_GUEST) {\r\n        //     if (this.props.shirt.sold !== true) {\r\n        //         soldOrForSale = <BuyShirt shirtID={this.props.shirt._id} price={this.props.shirt.price} />\r\n        //     }\r\n        //     else {\r\n        //         soldOrForSale = \"SOLD\"\r\n        //     }\r\n        // }\r\n\r\n\r\n        return (\r\n\r\n            <div className=\"shirt-container\">\r\n\r\n\r\n                {/* <div>{this.props.shirt.colour}</div>\r\n\r\n                <div>{this.props.shirt.size}</div>\r\n                \r\n                <div>{this.props.shirt.description}</div>\r\n\r\n                <div>{this.props.shirt.quantity}</div> */}\r\n                {this.props.shirt.sold == true ?\r\n                    <>\r\n                        <div className=\"shirtPhotos\">\r\n                            {this.props.shirt.shirtPhotoFilename.map(photo => <img key={photo._id} id={photo._id} alt=\"\" />)}\r\n                        </div>\r\n                        <div className=\"mainshirtnameprice\">\r\n                            <h2>Sold</h2>\r\n                        </div>\r\n                    </> :\r\n                    <Link to={{\r\n                        pathname: \"/SubShirt/\" + this.props.shirt._id,\r\n                        state: { shirt: this.props.shirt }\r\n                    }} className=\"mainlinktosubshirt\">\r\n                        <div className=\"shirtPhotos\">\r\n                            {this.props.shirt.shirtPhotoFilename.map(photo => <img key={photo._id} id={photo._id} alt=\"\" />)}\r\n                        </div>\r\n                        <div className=\"mainshirtnameprice\">\r\n                            <h2>{this.props.shirt.name}</h2>\r\n                            <div>€{this.props.shirt.price}</div>\r\n                            <div>{this.props.shirt.gender}</div>\r\n                        </div>\r\n                    </Link>}\r\n\r\n                <div className=\"admin-edit-delete-shirt\">\r\n                    {localStorage.accessLevel >= ACCESS_LEVEL_ADMIN ? <Link className=\"green-button\" to={\"/EditTShirt/\" + this.props.shirt._id}>Edit</Link> : null}\r\n\r\n                    {localStorage.accessLevel >= ACCESS_LEVEL_ADMIN ? <Link className=\"red-button\" to={\"/DeleteTShirt/\" + this.props.shirt._id}>Delete</Link> : null}\r\n\r\n                    {/* {soldOrForSale} */}\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from \"react\"\r\nimport { Link } from \"react-router-dom\"\r\n\r\nimport axios from \"axios\"\r\nimport NavigationBar from \"./NavigationBar\"\r\nimport ShirtBlock from \"./ShirtBlock\"\r\n\r\nimport { ACCESS_LEVEL_GUEST, ACCESS_LEVEL_ADMIN, SERVER_HOST } from \"../config/global_constants\"\r\n\r\n\r\nexport default class Main extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            shirts: [],\r\n            searchQuery: \"\",\r\n            sortType: \"default\",\r\n            genderFilter: \"\",\r\n        }\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        axios.get(`${SERVER_HOST}/shirts`)\r\n            .then(res => {\r\n                this.setState({ shirts: res.data })\r\n            })\r\n            .catch(err => {\r\n                // do nothing\r\n            })\r\n\r\n    }\r\n\r\n    handleSearchInputChange = (event) => {\r\n        this.setState({ searchQuery: event.target.value });\r\n    };\r\n\r\n    handleSortChange = event => {\r\n        this.setState({ sortType: event.target.value });\r\n    };\r\n\r\n    handleGenderFilterChange = (value) => {\r\n        this.setState({ genderFilter: value });\r\n    };\r\n\r\n    render() {\r\n        const { shirts, searchQuery, sortType, genderFilter } = this.state;\r\n        let filteredShirtsName = shirts.filter(shirt =>\r\n            shirt.name.toLowerCase().includes(searchQuery.toLowerCase())\r\n        );\r\n        if (sortType === \"PriceHighToLow\") {\r\n            filteredShirtsName.sort((a, b) => b.price - a.price);\r\n        } else if (sortType === \"PriceLowToHigh\") {\r\n            filteredShirtsName.sort((a, b) => a.price - b.price);\r\n        }\r\n\r\n\r\n        if (genderFilter === \"default\") {\r\n            filteredShirtsName = filteredShirtsName.filter(shirt => shirt.gender === \"default\");\r\n        } else if (genderFilter === \"male\") {\r\n            filteredShirtsName = filteredShirtsName.filter(shirt => shirt.gender === \"male\");\r\n        } else if (genderFilter === \"female\") {\r\n            filteredShirtsName = filteredShirtsName.filter(shirt => shirt.gender === \"female\");\r\n        } else if (genderFilter === \"unisex\") {\r\n            filteredShirtsName = filteredShirtsName.filter(shirt => shirt.gender === \"unisex\");\r\n        }\r\n        return (\r\n            <div>\r\n                <NavigationBar genderFilter={genderFilter} handleGenderFilterChange={this.handleGenderFilterChange.bind(this)} handleSearchInputChange={this.handleSearchInputChange} />\r\n                <div className=\"wholeMain\">\r\n                    {\r\n\r\n                        // localStorage.accessLevel > ACCESS_LEVEL_GUEST \r\n                        // ? <div className=\"logout\">\r\n                        //     {\r\n                        //         localStorage.profilePhoto !== \"null\" \r\n                        //         ? <img id=\"profilePhoto\" src={`data:;base64,${localStorage.profilePhoto}`} alt=\"\"/>\r\n                        //         : null\r\n                        //     }                        \r\n                        //     <Logout/>\r\n                        //   </div>\r\n                        // : <div>\r\n                        //     <Link className=\"green-button\" to={\"/Login\"}>Login</Link>\r\n                        //     <Link className=\"blue-button\" to={\"/Register\"}>Register</Link>  \r\n                        //     <Link className=\"red-button\" to={\"/ResetDatabase\"}>Reset Database</Link>  <br/><br/><br/></div>\r\n                    }\r\n\r\n                    {/* <div className=\"search-container\">\r\n                    <input type=\"text\"  placeholder=\"Search shirts...\" value={searchQuery} onChange={this.handleSearchInputChange} />\r\n                </div> */}\r\n\r\n                    <div className=\"sortandsearch\">\r\n                        <div className=\"sort-container\">\r\n                            <select value={sortType} onChange={this.handleSortChange}>\r\n                                <option value=\"default\">Default Sorting</option>\r\n                                <option value=\"PriceHighToLow\">Price: High to Low</option>\r\n                                <option value=\"PriceLowToHigh\">Price: Low to High</option>\r\n                            </select>\r\n                            {/* <select value={genderFilter} onChange={this.handleGenderFilterChange}>\r\n                        <option value=\"\">All Genders</option>\r\n                        <option value=\"male\">Male</option>\r\n                        <option value=\"female\">Female</option>\r\n                        <option value=\"unisex\">Unisex</option>\r\n                    </select> */}\r\n                        </div>\r\n                        <div className=\"navsearchbar\">\r\n                            {/* <Link to={\"/main\"}>SEARCH HERE</Link> */}\r\n                            <input type=\"text\" placeholder=\"Search shirts...\" onChange={this.handleSearchInputChange} />\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n\r\n                    <div className=\"main-container\">\r\n\r\n                        {/* {this.state.shirts.map((shirt)=><ShirtBlock key={shirt._id} shirt={shirt} />)}  */}\r\n                        {filteredShirtsName.map((shirt) => <ShirtBlock key={shirt._id} shirt={shirt} gender={shirt.gender} />)}\r\n\r\n                    </div>\r\n                    {\r\n                        localStorage.accessLevel >= ACCESS_LEVEL_ADMIN\r\n                            ? <div className=\"add-new-shirt\">\r\n                                <Link className=\"mainaddbutton\" to={\"/AddTShirt\"}>Add New T-Shirt</Link>\r\n                            </div>\r\n                            : null\r\n                    }\r\n\r\n                </div>\r\n            </div>\r\n\r\n        )\r\n    }\r\n}\r\n","import React, { Component } from \"react\"\r\nimport Form from \"react-bootstrap/Form\"\r\nimport { Redirect, Link } from \"react-router-dom\"\r\nimport axios from \"axios\"\r\n\r\nimport LinkInClass from \"../components/LinkInClass\"\r\n\r\nimport { ACCESS_LEVEL_NORMAL_USER, SERVER_HOST } from \"../config/global_constants\"\r\n\r\nexport default class EditTShirt extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            name: ``,\r\n            // colour: ``,\r\n            size: ``,\r\n            price: ``,\r\n            description: ``,\r\n            // quantity: ``,\r\n            stock: ``,\r\n            gender: ``,\r\n            shirtPhotoFilename: null,\r\n            redirectToDisplayAllShirts: localStorage.accessLevel < ACCESS_LEVEL_NORMAL_USER,\r\n            wasSubmittedAtLeastOnce: false\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.inputToFocus.focus()\r\n\r\n        axios.get(`${SERVER_HOST}/shirts/${this.props.match.params.id}`, { headers: { \"authorization\": localStorage.token } })\r\n            .then(res => {\r\n                this.setState({\r\n                    name: res.data.name,\r\n                    // colour: res.data.colour,\r\n                    size: res.data.size,\r\n                    price: res.data.price,\r\n                    description: res.data.description,\r\n                    // quantity: res.data.quantity\r\n                    stock: res.data.stock,\r\n                    gender: res.data.gender\r\n                })\r\n            })\r\n            .catch(err => {\r\n                // do nothing\r\n            })\r\n    }\r\n\r\n\r\n    handleChange = (e) => {\r\n        this.setState({ [e.target.name]: e.target.value })\r\n    }\r\n\r\n\r\n\r\n\r\n    handleSubmit = (e) => {\r\n        e.preventDefault()\r\n\r\n        let shirtObject = {\r\n            name: this.state.name,\r\n            // colour: this.state.colour,\r\n            size: this.state.size,\r\n            price: this.state.price,\r\n            description: this.state.description,\r\n            // quantity: this.state.quantity\r\n            stock: this.state.stock,\r\n            gender: this.state.gender\r\n        }\r\n\r\n        if (this.state.stock > 0) {\r\n            shirtObject = {\r\n                ...shirtObject,\r\n                sold: false\r\n            };\r\n        }\r\n\r\n\r\n        axios.put(`${SERVER_HOST}/shirts/${this.props.match.params.id}`, shirtObject, { headers: { \"authorization\": localStorage.token } })\r\n            .then(res => {\r\n                this.setState({ redirectToDisplayAllShirts: true })\r\n            })\r\n            .catch(err => {\r\n                this.setState({ wasSubmittedAtLeastOnce: true })\r\n            })\r\n    }\r\n\r\n\r\n    render() {\r\n        let errorMessage = \"\";\r\n        if (this.state.wasSubmittedAtLeastOnce) {\r\n            errorMessage = <div className=\"error\">Error: All fields must be filled in<br /></div>;\r\n        }\r\n\r\n        return (\r\n            <div className=\"form-container\">\r\n\r\n                {this.state.redirectToDisplayAllShirts ? <Redirect to=\"/main\" /> : null}\r\n\r\n                {errorMessage}\r\n\r\n                <Form>\r\n                    <Form.Group controlId=\"name\">\r\n                        <Form.Label>Name</Form.Label>\r\n                        <Form.Control ref={(input) => { this.inputToFocus = input }} type=\"text\" name=\"name\" value={this.state.name} onChange={this.handleChange} />\r\n                    </Form.Group>\r\n\r\n                    {/* <Form.Group controlId=\"colour\">\r\n                        <Form.Label>Colour</Form.Label>\r\n                        <Form.Control type=\"text\" name=\"colour\" value={this.state.colour} onChange={this.handleChange} />\r\n                    </Form.Group> */}\r\n\r\n                    <Form.Group controlId=\"size\">\r\n                        <Form.Label>Size</Form.Label>\r\n                        <Form.Control as=\"fieldset\">\r\n                            <Form.Check\r\n                                inline\r\n                                type=\"radio\"\r\n                                label=\"XS\"\r\n                                name=\"size\"\r\n                                value=\"XS\"\r\n                                checked={this.state.size === \"XS\"}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                            <Form.Check\r\n                                inline\r\n                                type=\"radio\"\r\n                                label=\"S\"\r\n                                name=\"size\"\r\n                                value=\"S\"\r\n                                checked={this.state.size === \"S\"}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                            <Form.Check\r\n                                inline\r\n                                type=\"radio\"\r\n                                label=\"M\"\r\n                                name=\"size\"\r\n                                value=\"M\"\r\n                                checked={this.state.size === \"M\"}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                            <Form.Check\r\n                                inline\r\n                                type=\"radio\"\r\n                                label=\"L\"\r\n                                name=\"size\"\r\n                                value=\"L\"\r\n                                checked={this.state.size === \"L\"}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                            <Form.Check\r\n                                inline\r\n                                type=\"radio\"\r\n                                label=\"XL\"\r\n                                name=\"size\"\r\n                                value=\"XL\"\r\n                                checked={this.state.size === \"XL\"}\r\n                                onChange={this.handleChange}\r\n                            />\r\n                        </Form.Control>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"gender\">\r\n                        <Form.Label>Gender</Form.Label>\r\n                        <Form.Control as=\"select\" name=\"gender\" value={this.state.gender} onChange={this.handleChange}>\r\n                            <option value=\"\">Select Gender</option>\r\n                            <option value=\"male\">Male</option>\r\n                            <option value=\"female\">Female</option>\r\n                            <option value=\"unisex\">UniSex</option>\r\n                        </Form.Control>\r\n                    </Form.Group>\r\n\r\n                    <Form.Group controlId=\"price\">\r\n                        <Form.Label>Price</Form.Label>\r\n                        <Form.Control type=\"text\" name=\"price\" value={this.state.price} onChange={this.handleChange} />\r\n                    </Form.Group>\r\n\r\n                    {/* <Form.Group controlId=\"quantity\">\r\n                        <Form.Label>Quantity</Form.Label>\r\n                        <Form.Control type=\"text\" name=\"quantity\" value={this.state.quantity} onChange={this.handleChange} />\r\n                    </Form.Group> */}\r\n\r\n                    <Form.Group controlId=\"stock\">\r\n                        <Form.Label>Stock</Form.Label>\r\n                        <Form.Control type=\"text\" name=\"stock\" value={this.state.stock} onChange={this.handleChange} />\r\n                    </Form.Group>\r\n                    <Form.Group controlId=\"description\">\r\n                        <Form.Label>Description</Form.Label>\r\n                        <Form.Control as=\"textarea\" name=\"description\" value={this.state.description} onChange={this.handleChange} />\r\n                    </Form.Group>\r\n\r\n\r\n\r\n                    <LinkInClass value=\"Update\" className=\"green-button\" onClick={this.handleSubmit} />\r\n\r\n                    <Link className=\"red-button\" to={\"/main\"}>Cancel</Link>\r\n                </Form>\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from \"react\"\r\nimport { Redirect } from \"react-router-dom\"\r\nimport axios from \"axios\"\r\n\r\nimport { SERVER_HOST } from \"../config/global_constants\"\r\n\r\n\r\nexport default class DeleteTShirt extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            redirectToDisplayAllShirts: false\r\n        }\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n        axios.delete(`${SERVER_HOST}/shirts/${this.props.match.params.id}`, { headers: { \"authorization\": localStorage.token } })\r\n            .then(res => {\r\n                this.setState({ redirectToDisplayAllShirts: true })\r\n            })\r\n            .catch(err => {\r\n                // Do nothing\r\n            })\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                {this.state.redirectToDisplayAllShirts ? <Redirect to=\"/main\" /> : null}\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from \"react\"\r\nimport Form from \"react-bootstrap/Form\"\r\nimport { Redirect, Link } from \"react-router-dom\"\r\nimport axios from \"axios\"\r\nimport NavigationBar from \"./NavigationBar\"\r\nimport { ACCESS_LEVEL_GUEST, ACCESS_LEVEL_ADMIN, SERVER_HOST } from \"../config/global_constants\"\r\nimport LinkInClass from \"../components/LinkInClass\"\r\nimport BuyShirt from \"./BuyShirt\"\r\n\r\n\r\nexport default class SubShirt extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n        const cartLocalStorage = JSON.parse(localStorage.getItem(\"itemsInCart\") || \"[]\")\r\n        this.state = {\r\n            shirtId: ``,\r\n            name: ``,\r\n            // colour: ``,\r\n            size: ``,\r\n            price: ``,\r\n            description: ``,\r\n            // quantity: ``,\r\n            quantity: 1,\r\n            stock: ``,\r\n            shirtPhotoFilename: null,\r\n            wasSubmittedAtLeastOnce: false,\r\n            redirectToDisplayAllShirtsInCart: false,\r\n            redirectBackToMain: false,\r\n            // user:``,\r\n            cart: [],\r\n            itemsInCart: cartLocalStorage,\r\n            cartId: ``\r\n        }\r\n    }\r\n    // componentDidUpdate(prevProps, prevState) {\r\n    //     // Check if cartList has changed\r\n    //     if (prevState.itemsInCart!== this.state.itemsInCart) {\r\n    //       localStorage.setItem(\"itemsInCart\", JSON.stringify(this.state.itemsInCart));\r\n    //     }\r\n    //   }\r\n\r\n    componentDidMount() {// use link to hold state\r\n        // this.inputToFocus.focus();\r\n        // axios.get(`${SERVER_HOST}/users/:id`)\r\n        // .then(res => \r\n        // { \r\n        //     this.setState({user: res.data})                                         \r\n        // })\r\n        // .catch(err =>\r\n        // {\r\n        //     // do nothing\r\n        // })\r\n        // axios.get(`${SERVER_HOST}/cart`)\r\n        // .then(res => \r\n        // { \r\n        //     this.setState({cart: res.data})    \r\n\r\n        // })\r\n        // .catch(err =>\r\n        // {\r\n        //     // do nothing\r\n        // })\r\n        // console.log(this.state.cart._id)\r\n\r\n        // axios.get(`${SERVER_HOST}/users`, { headers: { \"authorization\": localStorage.token } })\r\n        // .then(res => {\r\n        //     const userData = res.data._id;\r\n        //     this.setState({ user: userData });\r\n        // })\r\n        // .catch(error => {\r\n        //     console.error('Error fetching user data:', error);\r\n        // });\r\n        // localStorage.setItem(\"itemsInCart\", JSON.stringify(this.state.itemsInCart));\r\n\r\n        const { state } = this.props.location;\r\n        // console.log(this.props.location)\r\n        if (state && state.shirt) {\r\n            const shirtData = state.shirt;\r\n            console.log(\"shirtData: \", shirtData);\r\n            this.setState({\r\n                shirtId: shirtData._id,\r\n                name: shirtData.name,\r\n                size: shirtData.size,\r\n                price: shirtData.price,\r\n                description: shirtData.description,\r\n                stock: shirtData.stock,\r\n                shirtPhotoFilename: shirtData.shirtPhotoFilename\r\n            }, () => {\r\n                console.log(this.state.shirtPhotoFilename)\r\n                this.state.shirtPhotoFilename.map(photo => {\r\n                    return axios.get(`${SERVER_HOST}/shirts/photo/${photo.filename}`)\r\n                        .then(res => {\r\n                            document.getElementById(photo._id).src = `data:;base64,${res.data.image}`;\r\n                        })\r\n                        .catch(err => {\r\n                        });\r\n                });\r\n\r\n            });\r\n\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n\r\n    handleChange = (e) => {\r\n        const { name, value } = e.target;\r\n        if (name === 'quantity') {\r\n            const quantity = Math.max(1, Math.min(parseInt(value), this.state.stock));\r\n            this.setState({ quantity });\r\n        } else {\r\n            this.setState({ [name]: value });\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n\r\n    // handleSubmit = (e) => {\r\n    //     e.preventDefault()\r\n\r\n    //     const shirtObject = {\r\n    //         name: this.state.name,\r\n    //         // colour: this.state.colour,\r\n    //         size: this.state.size,\r\n    //         price: this.state.price,\r\n    //         description: this.state.description,\r\n    //         quantity: this.state.quantity,\r\n    //         stock: this.state.stock\r\n\r\n    //     }\r\n\r\n    // }\r\n\r\n\r\n    handleSubmit = (e) => {\r\n\r\n\r\n\r\n        //         let formData = new FormData()\r\n        //         // formData.append(\"userId\", this.state.user)\r\n        //         formData.append(\"name\", this.state.name)\r\n        //         // formData.append(\"colour\", this.state.colour)\r\n        //         formData.append(\"size\", this.state.size)\r\n        //         formData.append(\"price\", this.state.price)\r\n        //         formData.append(\"quantity\", this.state.quantity)        \r\n        // console.log(this.state.shirtPhotoFilename)\r\n        //         if (this.state.shirtPhotoFilename) {\r\n        //             console.log(1)\r\n        //             for (let i = 0; i < this.state.shirtPhotoFilename.length; i++) {\r\n        //                 formData.append(\"cartPhotos\", this.state.shirtPhotoFilename[i])\r\n        //                 console.log(2)\r\n        //             }\r\n        //         }\r\n        this.state.itemsInCart.push({ shirtId: this.state.shirtId, name: this.state.name, size: this.state.size, price: this.state.price, quantity: this.state.quantity, shirtPhotoFilename: this.state.shirtPhotoFilename, shirtPhotoFilename: this.state.shirtPhotoFilename, stock: this.state.stock })\r\n        // console.log(this.state.itemsInCart)\r\n        if (this.state.itemsInCart !== undefined) {\r\n            const groupedItems = this.state.itemsInCart.reduce((groups, item) => {\r\n                const group = groups.find(g => g.name === item.name);\r\n                if (group) {\r\n                    group.quantity += item.quantity;\r\n                    group.totalPrice += item.price * item.quantity;\r\n                } else {\r\n                    groups.push({\r\n                        shirtId: item.shirtId,\r\n                        name: item.name,\r\n                        size: item.size,\r\n                        quantity: item.quantity,\r\n                        price: item.price,\r\n                        totalPrice: item.price * item.quantity,\r\n                        shirtPhotoFilename: item.shirtPhotoFilename,\r\n                        shirtPhotoFilename: item.shirtPhotoFilename,\r\n                        stock: item.stock\r\n                    });\r\n                }\r\n                return groups;\r\n            }, []);\r\n            localStorage.setItem(\"itemsInCart\", JSON.stringify(groupedItems));\r\n        }\r\n        // localStorage.setItem(\"itemsInCart\", JSON.stringify(this.state.itemsInCart));\r\n        console.log(\"aboveRedirect: \", this.state.redirectToDisplayAllShirtsInCart)\r\n        this.setState({ redirectToDisplayAllShirtsInCart: true })\r\n        // this.setState({ wasSubmittedAtLeastOnce: true })\r\n\r\n\r\n        // axios.post(`${SERVER_HOST}/cart`, formData, { headers: { \"authorization\": localStorage.token, \"Content-type\": \"multipart/form-data\" } })\r\n        //     .then(res => {\r\n        //         const cartId = res.data._id;\r\n        //         this.setState({ cartId: cartId });\r\n        //         this.setState({ redirectToDisplayAllShirtsInCart: true })\r\n        //     })\r\n        //     .catch(err => {\r\n        //         this.setState({ wasSubmittedAtLeastOnce: true })\r\n        //     })\r\n    }\r\n\r\n\r\n\r\n\r\n\r\n    // handleQuantityChange = (e) => {\r\n    //     const quantity = parseInt(e.target.value);\r\n    //     this.setState({ quantity });\r\n    // };\r\n\r\n    // addToCart = () => {\r\n    //     // Add the selected shirt to the shopping cart\r\n    //     const { name, size, price, quantity,shirtPhotoFilename } = this.state;\r\n    //     const item = {\r\n    //         name,\r\n    //         size,\r\n    //         price,\r\n    //         quantity,\r\n    //         shirtPhotoFilename\r\n    //     };\r\n    //     console.log(\"Added to cart:\", item);\r\n\r\n    //     const updatedItemsInCart = [...this.state.itemsInCart, item];\r\n    //     this.setState({ redirectToCart: true, itemsInCart: updatedItemsInCart });\r\n    //     // this.setState({ redirectToCart: true });\r\n    // };\r\n    // handleClick=()=>{\r\n    //     // this.addToCart();\r\n    //     this.handleSubmit();\r\n\r\n    // }\r\n    handleMoveLeft = () => {\r\n        this.setState((prevState) => ({\r\n            currentSlideIndex: prevState.currentSlideIndex > 0 ? prevState.currentSlideIndex - 1 : prevState.currentSlideIndex\r\n        }))\r\n    };\r\n\r\n    handleMoveRight = () => {\r\n        this.setState((prevState) => ({\r\n            currentSlideIndex: prevState.currentSlideIndex < this.state.totalSlides - 1 ? prevState.currentSlideIndex + 1 : prevState.currentSlideIndex\r\n        }));\r\n    };\r\n\r\n    redirectToMain = () => {\r\n        this.setState({ redirectBackToMain: true })\r\n    }\r\n    render() {\r\n        console.log(\"shirtId\", this.state.shirtId)\r\n        // console.log(this.state.user)\r\n        let errorMessage = \"\";\r\n        if (this.state.wasSubmittedAtLeastOnce) {\r\n            errorMessage = <div className=\"error\">Error: All fields must be filled in<br /></div>;\r\n        }\r\n        // console.log(this.state);\r\n\r\n        // when you add t-shirt and click add to cart, it can direct to shopping cart.\r\n        // if (this.state.redirectToCart) {\r\n        //     return <Link to={{ pathname: \"/shoppingCart\", state: { itemsInCart: this.state.itemsInCart } }} onclick={this.handleSubmit}/>;\r\n        // }\r\n        console.log(\"itemsInCart\", this.state.itemsInCart)\r\n        console.log(\"shirtPhotosFilename\", this.state.shirtPhotoFilename)\r\n        console.log(\"cartId\", this.state.cartId)\r\n\r\n        let soldOrForSale = null\r\n        // if (localStorage.accessLevel <= ACCESS_LEVEL_GUEST) {\r\n        //     if (this.props.shirt.sold !== true) {\r\n        //         soldOrForSale = <BuyShirt shirtID={this.props.shirt._id} price={this.props.shirt.price} />\r\n        //     }\r\n        //     else {\r\n        //         soldOrForSale = \"SOLD\"\r\n        //     }\r\n        // }\r\n\r\n        return (\r\n            <div>\r\n                <NavigationBar />\r\n                {this.state.redirectBackToMain ? <Redirect to={\"/Main\"} /> : null}\r\n                {/* <div className=\"subshirtbacktomain\">\r\n                <LinkInClass value=\"Back\" className=\"grey-button\" onClick={this.handleBack} />\r\n                </div> */}\r\n                <div className=\"subshirtbacktomain\">\r\n                    <button onClick={this.redirectToMain} className=\"grey-button\"> Back </button>\r\n                    {/* <Link to=\"/main\" >Back</Link> */}\r\n                </div>\r\n                <div className=\"subShirtContainer\">\r\n                    {/* {this.state.redirectToDisplayAllShirtsInCart ? <Redirect to={{ pathname: `/shoppingCart/`+this.state.cart._id, state: { itemsInCart: this.state.itemsInCart } }}  /> : null} */}\r\n                    {/* {this.state.redirectToDisplayAllShirtsInCart ? <Redirect to={\"/ShoppingCart/\" + this.state.cartId} /> : null} */}\r\n                    {this.state.redirectToDisplayAllShirtsInCart ? <Redirect to={\"/ShoppingCart/\"} /> : null}\r\n                    {errorMessage}\r\n                    <div>\r\n                        {this.state.shirtPhotoFilename === null ? null : <div className=\"shirtPhotos\">\r\n                            {this.state.shirtPhotoFilename.map(photo => <img key={photo._id} id={photo._id} alt=\"\" />)}\r\n                        </div>}\r\n                        <div className=\"carousel-arrows\">\r\n                            <button onClick={this.handleMoveLeft}>&lt;</button>\r\n                            <button onClick={this.handleMoveRight}>&gt;</button>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"subshirtdetails\">\r\n                        <h1>{this.state.name}</h1><br></br>\r\n                        <h4>€{this.state.price}</h4><br></br>\r\n                        <h5>Stock: {this.state.stock}</h5>\r\n\r\n                        <Form className=\"subshirtform\">\r\n                            <Form.Group controlId=\"size\">\r\n                                <Form.Label>Size</Form.Label>\r\n                                <Form.Control as=\"select\" name=\"size\" value={this.state.size} onChange={this.handleChange}>\r\n                                    <option value=\"XS\">XS</option>\r\n                                    <option value=\"S\">S</option>\r\n                                    <option value=\"M\">M</option>\r\n                                    <option value=\"L\">L</option>\r\n                                    <option value=\"XL\">XL</option>\r\n                                </Form.Control>\r\n                            </Form.Group>\r\n                            <Form.Group controlId=\"quantity\">\r\n                                <Form.Label>Quantity</Form.Label>\r\n                                {/* <Form.Control type=\"number\" name=\"quantity\" value={this.state.quantity} onChange={this.handleQuantityChange} /> */}\r\n                                <Form.Control type=\"number\" name=\"quantity\" value={this.state.quantity} onChange={this.handleChange} />\r\n                            </Form.Group>\r\n                            <p>{this.state.description}</p>\r\n                            <LinkInClass value=\"Add to Cart\" className=\"green-button\" onClick={this.handleSubmit} />\r\n                        </Form>\r\n\r\n                        {/* {soldOrForSale}\r\n                        <BuyShirt /> */}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}","import React, { Component } from \"react\"\r\nimport { Redirect, Link } from \"react-router-dom\"\r\nimport axios from \"axios\"\r\nimport NavigationBar from \"./NavigationBar\"\r\nimport LinkInClass from \"../components/LinkInClass\"\r\n\r\nimport { SERVER_HOST } from \"../config/global_constants\"\r\n\r\n// import TFooter from \"./TFooter\"\r\nimport image_about from \"./images/image_about.jpg\"\r\n\r\nexport default class About extends Component {\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <NavigationBar />\r\n                <main className=\"about_main\">\r\n                    <h1>ABOUT US</h1>\r\n\r\n                    {/* <h2>Welcome to T-Shirt Store!</h2>\r\n                    <p>At T-Shirt Store, we believe that fashion is an expression of individuality, and what better way to showcase your unique style than through the canvas of a comfortable and stylish t-shirt? Established with a passion for quality and creativity, our store is a haven for those who appreciate the perfect blend of comfort, design, and self-expression.</p> */}\r\n\r\n                    <h2>Our Story</h2>\r\n                    <p>T-Shirt Store was born out of a desire to bring together a curated collection of t-shirts that not only elevate your wardrobe but also tell a story. With a team of dedicated fashion enthusiasts, we scour the globe for the latest trends, timeless classics, and quirky designs that reflect the diverse tastes of our customers.</p>\r\n\r\n                    <div className=\"about_background_image\">\r\n\r\n                        <h2 className=\"about_left_title\">Style for Every Occasion</h2>\r\n                        <p className=\"about_right_text\">Whether you're looking for a casual everyday look, a statement piece for a night out, or a unique gift for a loved one, T-Shirt Store has you covered. Our diverse range includes graphic tees, minimalist designs, and everything in between. Find the perfect tee that resonates with your personality and makes you stand out in the crowd.</p>\r\n\r\n                    </div>\r\n                    <span className=\"image_container\">\r\n\r\n                        <div className=\"about_left_text\">\r\n                            <h2>Quality Matters</h2>\r\n                            <p>We understand the importance of comfort without compromising on style. That's why each t-shirt in our collection is crafted with precision and attention to detail. From the softest fabrics to durable prints, we ensure that every piece meets the high standards we set for ourselves.</p>\r\n                        </div>\r\n                        <img src={image_about} alt=\"select clothes image\" />\r\n                    </span>\r\n\r\n                    <h2>Join the T-Shirt Store Community</h2>\r\n                    <p>We invite you to be a part of the T-Shirt Store community (<Link to={\"/Contact\"}>Join Community</Link>). Follow us on social media for the latest updates, style tips, and exclusive offers. Share your T-Shirt Store moments with us using #TShirtStoreStyle – because your style journey is our inspiration!</p>\r\n                    <p>Thank you for choosing T-Shirt Store, where every t-shirt tells a story, and fashion is a celebration of you.</p>\r\n                    <p>Happy shopping!</p>\r\n\r\n\r\n                </main>\r\n\r\n            </div>\r\n        )\r\n    }\r\n}","// import React, {Component} from \"react\"\r\n// import {Link} from \"react-router-dom\"\r\n\r\n// import axios from \"axios\"\r\n// import NavigationBar from \"./NavigationBar\"\r\n\r\n\r\n// import {ACCESS_LEVEL_GUEST, ACCESS_LEVEL_ADMIN, SERVER_HOST} from \"../config/global_constants\"\r\n\r\n\r\n// export default class Dashboard extends Component \r\n// {\r\n//     constructor(props) \r\n//     {\r\n//         super(props)\r\n\r\n//         this.state = {\r\n//             user:[]\r\n//         }\r\n//     }\r\n\r\n\r\n//     componentDidMount() {\r\n//         let userEmail = JSON.parse(localStorage.getItem(\"userEmail\") || null);\r\n\r\n//         // axios.get(`${SERVER_HOST}/users/email`,{email:userEmail},)\r\n//         //     .then(res => {\r\n//         //         this.setState({ user: res.data });\r\n//         //     })\r\n//         //     .catch(err => {\r\n//         //         console.error(\"Error fetching user data:\", err);\r\n//         //     });\r\n//     //     axios.get(`${SERVER_HOST}/users/email`, { params: { email: userEmail } })\r\n//     // .then(res => {\r\n//     //     this.setState({ user: res.data });\r\n//     // })\r\n//     // .catch(err => {\r\n//     //     console.error(\"Error fetching user data:\", err);\r\n//     // });\r\n//     axios.get(`${SERVER_HOST}/users/email?email=${userEmail}`)\r\n//     .then(res => {\r\n//         this.setState({ user: res.data });\r\n//     })\r\n//     .catch(err => {\r\n//         console.error(\"Error fetching user data:\", err);\r\n//     });\r\n\r\n\r\n//     }\r\n\r\n\r\n\r\n\r\n\r\n\r\n//     render() \r\n//     {   \r\n// console.log(this.state.user)\r\n//             return (           \r\n//             <div>\r\n//                 <NavigationBar />\r\n\r\n\r\n//             </div>\r\n\r\n//         )\r\n//     }\r\n// }\r\n\r\n\r\n// import React, { Component } from \"react\";\r\n// import axios from \"axios\";\r\n// import NavigationBar from \"./NavigationBar\";\r\n// import { SERVER_HOST } from \"../config/global_constants\";\r\n\r\n// export default class Dashboard extends Component {\r\n//     constructor(props) {\r\n//         super(props);\r\n\r\n//         this.state = {\r\n//             user: {},\r\n//             newName: \"\",\r\n//             newPhone: \"\",\r\n//             newAddress: \"\"\r\n//         };\r\n//     }\r\n\r\n//     componentDidMount() {\r\n//         let userEmail = JSON.parse(localStorage.getItem(\"userEmail\") || null);\r\n\r\n//         axios.get(`${SERVER_HOST}/users/email?email=${userEmail}`)\r\n//             .then(res => {\r\n//                 this.setState({ user: res.data });\r\n//             })\r\n//             .catch(err => {\r\n//                 console.error(\"Error fetching user data:\", err);\r\n//             });\r\n//     }\r\n\r\n//     handleInputChange = (e) => {\r\n//         const { name, value } = e.target;\r\n//         this.setState({ [name]: value });\r\n//     }\r\n\r\n//     updateUser = (e) => {\r\n//         e.preventDefault();\r\n//         const { newName, newPhone, newAddress } = this.state;\r\n//         const userEmail = JSON.parse(localStorage.getItem(\"userEmail\") || null);\r\n\r\n//         axios.put(`${SERVER_HOST}/users/update`, { email: userEmail, newName, newPhone, newAddress })\r\n//             .then(res => {\r\n//                 // Handle success\r\n//                 console.log(\"User updated successfully\");\r\n//             })\r\n//             .catch(err => {\r\n//                 // Handle error\r\n//                 console.error(\"Error updating user:\", err);\r\n//             });\r\n//     }\r\n\r\n//     render() {\r\n\r\n//         const { user, newName, newPhone, newAddress } = this.state;\r\n//         console.log(user)\r\n// console.log(newName)\r\n// console.log(newPhone)\r\n// console.log(newAddress)\r\n//         return (\r\n//             <div>\r\n//                 <NavigationBar />\r\n//                 <h2>Welcome, {user.name}</h2>\r\n//                 <form onSubmit={this.updateUser}>\r\n//                     <div>\r\n//                         <label>Name:</label>\r\n//                         <input type=\"text\" name=\"newName\" value={newName} onChange={this.handleInputChange} />\r\n//                     </div>\r\n//                     <div>\r\n//                         <label>Phone:</label>\r\n//                         <input type=\"text\" name=\"newPhone\" value={newPhone} onChange={this.handleInputChange} />\r\n//                     </div>\r\n//                     <div>\r\n//                         <label>Address:</label>\r\n//                         <input type=\"text\" name=\"newAddress\" value={newAddress} onChange={this.handleInputChange} />\r\n//                     </div>\r\n//                     <button type=\"submit\">Save</button>\r\n//                 </form>\r\n//             </div>\r\n//         );\r\n//     }\r\n// }\r\n\r\n\r\n\r\nimport React, { Component } from \"react\";\r\nimport axios from \"axios\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\nimport NavigationBar from \"./NavigationBar\";\r\nimport { SERVER_HOST } from \"../config/global_constants\";\r\nimport Logout from \"./Logout\"\r\nimport LinkInClass from \"../components/LinkInClass\"\r\n\r\nexport default class Dashboard extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            user: {},\r\n            newName: \"\",\r\n            newPhone: \"\",\r\n            newAddress: \"\",\r\n            redirectToMain: false,\r\n            redirectToCart: false,\r\n            // redirectToLogout: false,\r\n            from: \"\",\r\n            errors: {\r\n                newName: \"\",\r\n                newPhone: \"\",\r\n                newAddress: \"\"\r\n            }\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        let userEmail = JSON.parse(localStorage.getItem(\"userEmail\") || null);\r\n\r\n        axios.get(`${SERVER_HOST}/users/email?email=${userEmail}`)\r\n            .then(res => {\r\n                this.setState({ user: res.data, newName: res.data.name, newPhone: res.data.phone, newAddress: res.data.address });\r\n            })\r\n            .catch(err => {\r\n                console.error(\"Error fetching user data:\", err);\r\n            });\r\n\r\n        const { state } = this.props.location;\r\n        if (state && state.from === \"cart\") {\r\n            this.setState({ from: \"cart\" })\r\n        }\r\n    }\r\n\r\n    handleInputChange = (e) => {\r\n        const { name, value } = e.target;\r\n        this.setState({ [name]: value });\r\n    }\r\n\r\n    updateUser = (e) => {\r\n        e.preventDefault();\r\n        const { newName, newPhone, newAddress } = this.state;\r\n\r\n        // Validation\r\n        const errors = {};\r\n        if (!newName.trim()) {\r\n            errors.newName = \"Name is required\";\r\n        }\r\n        if (!newPhone.trim()) {\r\n            errors.newPhone = \"Phone number is required\";\r\n        } else if (!/^\\d{8,15}$/.test(newPhone)) {\r\n            errors.newPhone = \"Phone number must be between 8 and 15 digits\";\r\n        }\r\n        if (!newAddress.trim()) {\r\n            errors.newAddress = \"Address is required\";\r\n        }\r\n\r\n        // Check if there are any errors\r\n        if (Object.keys(errors).length === 0) {\r\n            // No errors, proceed with submission\r\n            const userEmail = JSON.parse(localStorage.getItem(\"userEmail\") || null);\r\n\r\n            axios.put(`${SERVER_HOST}/users/update`, { email: userEmail, newName, newPhone, newAddress })\r\n                .then(res => {\r\n                    // Handle success\r\n                    console.log(\"User updated successfully\");\r\n                    if (this.state.from === \"cart\") {\r\n                        this.setState({ redirectToCart: true });\r\n                    } else {\r\n                        this.setState({ redirectToMain: true });\r\n                    }\r\n                })\r\n                .catch(err => {\r\n                    // Handle error\r\n                    console.error(\"Error updating user:\", err);\r\n                });\r\n        } else {\r\n            // Errors found, update state with error messages\r\n            this.setState({ errors });\r\n        }\r\n    }\r\n\r\n    // handleLogout = (e) => {\r\n    //     this.setState({ redirectToLogout: true })\r\n    // }\r\n\r\n    render() {\r\n        const { user, newName, newPhone, newAddress, errors } = this.state;\r\n\r\n        return (\r\n\r\n            <div>\r\n                {/* {this.state.redirectToLogout ? <Redirect to={\"/Logout\"} /> : null} */}\r\n                {this.state.redirectToMain ? <Redirect to={\"/main\"} /> : null}\r\n                {this.state.redirectToCart ? <Redirect to={{ pathname: \"/ShoppingCart/\", state: { haveEnoughData: true } }} /> : null}\r\n                <NavigationBar />\r\n                <h2 className=\"shoppingcarth2\">Welcome, {user.name}</h2>\r\n                <form onSubmit={this.updateUser} className=\"userdashboardform\">\r\n                    <div className=\"biggestdashboard\">\r\n                        <div className=\"dashboardimage\">\r\n                            <img id=\"myphoto\" src={`data:;base64,${localStorage.profilePhoto}`} alt=\"\" />\r\n                        </div>\r\n                        <div className=\"theotherhalfdashboard\">\r\n                            <div className=\"labelinputdiv\">\r\n                                <div>\r\n                                    <label>Name: </label>\r\n                                </div>\r\n                                <div>\r\n                                    <input type=\"text\" placeholder=\"Name\" name=\"newName\" value={newName !== null ? newName : user.name} onChange={this.handleInputChange} />\r\n                                    {errors.newName && <h6 className=\"error\">{errors.newName}</h6>}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"labelinputdiv\">\r\n                                <div>\r\n                                    <label>Phone: </label>\r\n                                </div>\r\n                                <div>\r\n                                    <input type=\"text\" placeholder=\"Phone\" name=\"newPhone\" value={newPhone !== null ? newPhone : user.phone} onChange={this.handleInputChange} />\r\n                                    {errors.newPhone && <h6 className=\"error\">{errors.newPhone}</h6>}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"labelinputdiv\">\r\n                                <div>\r\n                                    <label>Address: </label>\r\n                                </div>\r\n                                <div>\r\n                                    <input type=\"text\" placeholder=\"Address\" name=\"newAddress\" value={newAddress !== null ? newAddress : user.address} onChange={this.handleInputChange} />\r\n                                    {errors.newAddress && <h6 className=\"error\">{errors.newAddress}</h6>}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"dashboardsavebutton\">\r\n                                <button type=\"submit\">Save</button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </form>\r\n                <div className=\"subshirtbacktomain\">\r\n                    <Link to=\"/viewpurchasehistory\" className=\"purchasehistory\">Purchase History</Link>\r\n                </div>\r\n                <div className=\"logoutButton\">\r\n                    <button className=\"logoutbutton\"><Logout /></button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n","import React, { Component } from \"react\"\r\nimport { Redirect, Link } from \"react-router-dom\"\r\nimport Logout from \"./Logout\"\r\nimport axios from \"axios\"\r\nimport NavigationBar from \"./NavigationBar\"\r\n\r\nimport { ACCESS_LEVEL_GUEST, ACCESS_LEVEL_ADMIN, ACCESS_LEVEL_NORMAL_USER, SERVER_HOST } from \"../config/global_constants\"\r\n\r\n\r\n\r\nexport default class ViewAllUsers extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            users: [],\r\n            searchQuery: \"\",\r\n            sortFunction: \"name\",\r\n            phoneFilter: \"all\"\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (localStorage.accessLevel > ACCESS_LEVEL_NORMAL_USER) {\r\n            axios.get(`${SERVER_HOST}/users`)\r\n                .then(res => {\r\n                    this.setState({ users: res.data })\r\n                })\r\n                .catch(err => {\r\n                    // do nothing\r\n                    console.error(\"Error fetching users:\", err);\r\n                })\r\n        }\r\n    }\r\n\r\n    handleDelete = (userId) => {\r\n        axios.delete(`${SERVER_HOST}/users/${userId}`)\r\n            .then(res => {\r\n                // Update state after successful deletion\r\n                this.setState(prevState => ({\r\n                    users: prevState.users.filter(user => user._id !== userId)\r\n                }));\r\n            })\r\n            .catch(err => {\r\n                // Handle error\r\n                console.error(\"Error deleting user:\", err);\r\n            });\r\n    };\r\n\r\n    handleSearchChange = (event) => {\r\n        this.setState({ searchQuery: event.target.value });\r\n    };\r\n\r\n    handleSortChange = (event) => {\r\n        this.setState({ sortFunction: event.target.value });\r\n    };\r\n\r\n    handlePhoneFilterChange = (value) => {\r\n        this.setState({ phoneFilter: value });\r\n    };\r\n\r\n    render() {\r\n        const { users, searchQuery, sortFunction, phoneFilter } = this.state;\r\n\r\n        let filteredUsers = users.filter(user =>\r\n            user.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            user.email.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            user.phone.toLowerCase().includes(searchQuery.toLowerCase()) ||\r\n            user.address.toLowerCase().includes(searchQuery.toLowerCase())\r\n        );\r\n\r\n        if (phoneFilter === \"irish\") {\r\n            filteredUsers = filteredUsers.filter(user => user.phone.startsWith(\"353\"));\r\n        }\r\n\r\n        let sortedUsers = [...filteredUsers];\r\n        if (sortFunction === \"name\") {\r\n            sortedUsers.sort((a, b) => a.name.localeCompare(b.name));\r\n        } else if (sortFunction === \"email\") {\r\n            sortedUsers.sort((a, b) => a.email.localeCompare(b.email));\r\n        } else if (sortFunction === \"phone\") {\r\n            sortedUsers.sort((a, b) => {\r\n                if (!a.phone && !b.phone) return 0;\r\n                if (!a.phone) return 1;\r\n                if (!b.phone) return -1;\r\n                return a.phone.localeCompare(b.phone);\r\n            });\r\n        } else if (sortFunction === \"address\") {\r\n            sortedUsers.sort((a, b) => {\r\n                if (!a.address && !b.address) return 0;\r\n                if (!a.address) return 1;\r\n                if (!b.address) return -1;\r\n                return a.address.localeCompare(b.address);\r\n            });\r\n        }\r\n\r\n        return (\r\n            <>\r\n                {localStorage.accessLevel > ACCESS_LEVEL_NORMAL_USER ?\r\n                    <div>\r\n                        <NavigationBar />\r\n                        <h2 className=\"shoppingcarth2\">All Users</h2>\r\n                        <div className=\"threedivinviewallusers\">\r\n                            <input\r\n                                type=\"text\"\r\n                                placeholder=\"Search...\"\r\n                                value={searchQuery}\r\n                                onChange={this.handleSearchChange}\r\n                            />\r\n\r\n                            <select value={sortFunction} onChange={this.handleSortChange}>\r\n                                <option value=\"name\">Sort by Name</option>\r\n                                <option value=\"email\">Sort by Email</option>\r\n                                <option value=\"phone\">Sort by Phone</option>\r\n                                <option value=\"address\">Sort by Address</option>\r\n                            </select>\r\n\r\n                            <div>\r\n                                <label htmlFor=\"phoneFilter\">Filter by Phone:</label>\r\n                                <select id=\"phoneFilter\" value={phoneFilter} onChange={(e) => this.handlePhoneFilterChange(e.target.value)}>\r\n                                    <option value=\"all\">All</option>\r\n                                    <option value=\"irish\">Irish</option>\r\n                                    {/* Add more options for other filters if needed */}\r\n                                </select>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"viewallusertable\">\r\n                            <table>\r\n                                <thead>\r\n                                    <tr>\r\n                                        <th>Name</th>\r\n                                        <th>Email</th>\r\n                                        <th>Phone</th>\r\n                                        <th>Address</th>\r\n                                        <th className=\"configure\">Configure</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody>\r\n                                    {sortedUsers.map(user => (\r\n                                        user.accessLevel == ACCESS_LEVEL_ADMIN ? null :\r\n\r\n                                            <tr key={user._id}>\r\n                                                <td>{user.name}</td>\r\n                                                <td>{user.email}</td>\r\n                                                <td>{user.phone}</td>\r\n                                                <td>{user.address}</td>\r\n                                                <td>\r\n                                                    <div className=\"tddd\">\r\n                                                        <button onClick={() => this.handleDelete(user._id)} className=\"logoutbutton\">Delete</button>\r\n                                                        <Link className=\"green-button\" to={`/ViewPurchaseHistory/${user.email}`}>View Purchase History</Link>\r\n                                                    </div>\r\n                                                </td>\r\n                                            </tr>\r\n\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        </div>\r\n                        <div className=\"logoutButton\">\r\n                            <button className=\"logoutbutton\"><Logout /></button>\r\n                        </div>\r\n\r\n                    </div>\r\n                    : <Redirect to={\"/main\"} />}\r\n            </>\r\n        );\r\n    }\r\n}\r\n\r\n\r\n","// import React, { Component } from \"react\"\r\n// import { Redirect, Link } from \"react-router-dom\"\r\n\r\n// import axios from \"axios\"\r\n\r\n// import NavigationBar from \"./NavigationBar\"\r\n\r\n// import { ACCESS_LEVEL_GUEST, ACCESS_LEVEL_ADMIN, ACCESS_LEVEL_NORMAL_USER, SERVER_HOST } from \"../config/global_constants\"\r\n\r\n\r\n// export default class ViewAllUsers extends Component {\r\n//     constructor(props) {\r\n//         super(props)\r\n\r\n//         this.state = {\r\n//             purchaseHistory: [],\r\n//             eachItemsInOrder: [],\r\n//             allOrders: [],\r\n//             searchQuery: \"\",\r\n//             sortFunction: \"name\",\r\n//             sizeFilter: \"\"\r\n//         }\r\n//     }\r\n\r\n\r\n//     // componentDidMount() {\r\n//     //     if (localStorage.accessLevel > ACCESS_LEVEL_GUEST) {\r\n//     //         let userEmail = JSON.parse(localStorage.getItem(\"userEmail\"));\r\n//     //         axios.get(`${SERVER_HOST}/sales/email?email=${userEmail}`)\r\n//     //         .then(res => {\r\n//     //             // Update purchaseHistory state\r\n//     //             this.setState({ purchaseHistory: res.data }, () => {\r\n//     //                 // Iterate over each item in purchase history and fetch shirt details\r\n//     //                 this.state.purchaseHistory.forEach(itemsInArray => {\r\n//     //                     itemsInArray.items.forEach(item => { // Changed from map to forEach\r\n//     //                         axios.get(`${SERVER_HOST}/shirts/${item.shirtID}`, { headers: { \"authorization\": localStorage.token } })\r\n//     //                         .then(res => {\r\n//     //                             const updatedItem = { ...res.data, quantity: item.quantity }; // Add quantity property\r\n//     //                             // Update eachItemsInOrder state by appending new items\r\n//     //                             this.setState(prevState => ({\r\n//     //                                 eachItemsInOrder: [...prevState.eachItemsInOrder, updatedItem]\r\n//     //                             }));\r\n//     //                         })\r\n//     //                         .catch(err => {\r\n//     //                             console.error(\"Error fetching shirt data:\", err);\r\n//     //                         });\r\n//     //                     });\r\n//     //                 });\r\n//     //             });\r\n//     //         })\r\n//     //         .catch(err => {\r\n//     //             console.error(\"Error fetching user data:\", err);\r\n//     //         });\r\n//     //     }\r\n//     // }\r\n//     // componentDidMount() {\r\n//     //     if (localStorage.accessLevel > ACCESS_LEVEL_GUEST) {\r\n//     //         let userEmail = JSON.parse(localStorage.getItem(\"userEmail\"));\r\n//     //         axios.get(`${SERVER_HOST}/sales/email?email=${userEmail}`)\r\n//     //         .then(res => {\r\n//     //             // Update purchaseHistory state\r\n//     //             this.setState({ purchaseHistory: res.data }, () => {\r\n//     //                 // Iterate over each item in purchase history\r\n//     //                 this.state.purchaseHistory.forEach((itemsInArray, index) => {\r\n//     //                     // Store each itemsInOrder array in a separate array\r\n//     //                     let eachItemsInOrder = [];\r\n//     //                     itemsInArray.items.forEach(item => {\r\n//     //                         axios.get(`${SERVER_HOST}/shirts/${item.shirtID}`, { headers: { \"authorization\": localStorage.token } })\r\n//     //                         .then(res => {\r\n//     //                             const updatedItem = { ...res.data, quantity: item.quantity }; // Add quantity property\r\n//     //                             eachItemsInOrder.push(updatedItem);\r\n//     //                         })\r\n//     //                         .catch(err => {\r\n//     //                             console.error(\"Error fetching shirt data:\", err);\r\n//     //                         });\r\n//     //                     });\r\n//     //                     // Push eachItemsInOrder array into allOrders array\r\n//     //                     this.setState(prevState => ({\r\n//     //                         allOrders: [\r\n//     //                             ...prevState.allOrders,\r\n//     //                             {\r\n//     //                                 orderId: itemsInArray._id, // Store item._id into allOrders\r\n//     //                                 eachItemsInOrder: eachItemsInOrder\r\n//     //                             }\r\n//     //                         ]\r\n//     //                     }));\r\n//     //                 });\r\n//     //             });\r\n//     //         })\r\n//     //         .catch(err => {\r\n//     //             console.error(\"Error fetching user data:\", err);\r\n//     //         });\r\n//     //     }\r\n//     // }\r\n\r\n\r\n//     componentDidMount() {\r\n//         if (localStorage.accessLevel > ACCESS_LEVEL_GUEST) {\r\n//             //             let userEmail;\r\n//             //             // const currentUrl = window.location.pathname;\r\n//             //             if(localStorage.accessLevel === ACCESS_LEVEL_NORMAL_USER){\r\n//             //             userEmail = JSON.parse(localStorage.getItem(\"userEmail\"));\r\n//             //             console.log(userEmail)\r\n//             //             }else if(localStorage.accessLevel ===ACCESS_LEVEL_ADMIN){\r\n//             //                 userEmail = this.props.match.params.email;\r\n//             //                 console.log(userEmail)\r\n//             //             }\r\n//             // console.log(userEmail)\r\n//             let userEmail = '';\r\n//             if (localStorage.accessLevel > ACCESS_LEVEL_NORMAL_USER) {\r\n//                 userEmail = this.props.match.params.email;\r\n//             }\r\n//             else {\r\n//                 userEmail = JSON.parse(localStorage.getItem(\"userEmail\"));\r\n//             }\r\n//             console.log(\"User Email: \", userEmail);\r\n\r\n//             axios.get(`${SERVER_HOST}/sales/email?email=${userEmail}`)\r\n//                 .then(res => {\r\n//                     // Update purchase history state\r\n//                     this.setState({ purchaseHistory: res.data }, () => {\r\n//                         // Iterate over each purchase history item\r\n//                         this.state.purchaseHistory.forEach((itemsInArray, index) => {\r\n//                             let eachItemsInOrder = [];\r\n//                             let totalPrice = 0; // Initialize total price for the order\r\n//                             itemsInArray.items.forEach(item => {\r\n//                                 // Fetch shirt details and calculate total price for each item\r\n//                                 axios.get(`${SERVER_HOST}/shirts/${item.shirtID}`, { headers: { \"authorization\": localStorage.token } })\r\n//                                     .then(res => {\r\n//                                         const updatedItem = { ...res.data, quantity: item.quantity };\r\n//                                         eachItemsInOrder.push(updatedItem);\r\n\r\n//                                         // Check if all items are fetched\r\n//                                         if (eachItemsInOrder.length === itemsInArray.items.length) {\r\n//                                             // Add the price of the item to the total price\r\n//                                             eachItemsInOrder.map(item => totalPrice += item.price * item.quantity)\r\n\r\n//                                             // Update state after all items are fetched\r\n//                                             this.setState(prevState => ({\r\n//                                                 allOrders: [\r\n//                                                     ...prevState.allOrders,\r\n//                                                     {\r\n//                                                         orderId: itemsInArray._id,\r\n//                                                         refunded: itemsInArray.refunded,\r\n//                                                         eachItemsInOrder: eachItemsInOrder,\r\n//                                                         totalPrice: totalPrice\r\n//                                                     }\r\n//                                                 ]\r\n//                                             }), () => {\r\n//                                                 // Call loadShirtPhotos() after updating state\r\n//                                                 this.loadShirtPhotos();\r\n//                                             });\r\n//                                         }\r\n//                                     })\r\n//                                     .catch(err => {\r\n//                                         console.error(\"Error fetching shirt data:\", err);\r\n//                                     });\r\n//                             });\r\n//                         });\r\n//                     });\r\n//                 })\r\n//                 .catch(err => {\r\n//                     console.error(\"Error fetching user data:\", err);\r\n//                 });\r\n//         }\r\n//     }\r\n\r\n//     loadShirtPhotos() {\r\n//         this.state.allOrders.forEach(order => {\r\n//             order.eachItemsInOrder.forEach(item => {\r\n//                 item.shirtPhotoFilename.forEach(photo => {\r\n//                     axios.get(`${SERVER_HOST}/shirts/photo/${photo.filename}`)\r\n//                         .then(res => {\r\n//                             // Update shirt photo in DOM\r\n//                             const elements = document.getElementsByClassName(photo._id);\r\n//                             Array.from(elements).forEach(element => {\r\n//                                 element.src = `data:;base64,${res.data.image}`;\r\n//                             });\r\n//                         })\r\n//                         .catch(err => {\r\n//                             // Handle error\r\n//                             console.error(\"Error loading shirt photo:\", err);\r\n//                         });\r\n\r\n//                 });\r\n//             });\r\n//         });\r\n//     }\r\n\r\n//     handleDelete = (orderId, itemId, stockBeforeReturn, itemQuantity, refundMoney, refundedMoney, totalPrice) => {\r\n//         let newItems = [];\r\n//         let saleObject;\r\n\r\n//         // Map through purchase history to find the order with the given orderId\r\n//         const updatedPurchaseHistory = this.state.purchaseHistory.map(order => {\r\n//             if (order._id === orderId) {\r\n//                 // Iterate over the items in the order\r\n//                 order.items.forEach(item => {\r\n//                     if (item.shirtID === itemId) {\r\n//                         // If the item matches the itemId, subtract the returned quantity from the item's quantity\r\n//                         item.quantity -= itemQuantity;\r\n\r\n//                         // If the updated quantity is zero or less, don't add it to newItems\r\n//                         if (item.quantity > 0) {\r\n//                             newItems.push(item); // Add the updated item to newItems\r\n//                         }\r\n//                     } else {\r\n//                         newItems.push(item); // Add unchanged items to newItems\r\n//                     }\r\n//                 });\r\n\r\n//                 // Create the saleObject with updated refund and price\r\n//                 saleObject = {\r\n//                     refunded: refundedMoney + refundMoney,\r\n//                     price: totalPrice - refundMoney,\r\n//                     items: newItems // Set the newItems array\r\n//                 };\r\n//             }\r\n//             return order;\r\n//         });\r\n\r\n//         // Update the purchase history in the state\r\n//         this.setState({ purchaseHistory: updatedPurchaseHistory }, () => {\r\n//             this.updateAllOrders(updatedPurchaseHistory);\r\n//         });\r\n\r\n//         axios.put(`${SERVER_HOST}/sales/${orderId}`, saleObject, { headers: { \"authorization\": localStorage.token } })\r\n//             .then(res => {\r\n//                 // Handle success if needed\r\n//                 console.log(`Updated Sales with ID: ${orderId}`);\r\n//                 localStorage.removeItem(\"itemsInCart\");\r\n//             })\r\n//             .catch(err => {\r\n//                 // Handle error if needed\r\n//                 console.error(`Error updating Sales with ID: ${orderId}`, err);\r\n//             });\r\n\r\n//         let shirtObject = {\r\n//             stock: stockBeforeReturn + itemQuantity,\r\n//             sold: false\r\n//         };\r\n//         axios.put(`${SERVER_HOST}/shirts/${itemId}`, shirtObject, { headers: { \"authorization\": localStorage.token } })\r\n//             .then(res => {\r\n//                 // Handle success if needed\r\n//                 console.log(`Stock updated for shirt with ID: ${itemId}`);\r\n//                 localStorage.removeItem(\"itemsInCart\");\r\n//             })\r\n//             .catch(err => {\r\n//                 // Handle error if needed\r\n//                 console.error(`Error updating stock for shirt with ID: ${itemId}`, err);\r\n//             });\r\n//     }\r\n\r\n\r\n//     updateAllOrders = (purchaseHistory) => {\r\n//         let allOrders = [];\r\n//         purchaseHistory.forEach((itemsInArray, index) => {\r\n//             let eachItemsInOrder = [];\r\n//             let totalPrice = 0; // Initialize total price for the order\r\n//             itemsInArray.items.forEach(item => {\r\n//                 // Fetch shirt details and calculate total price for each item\r\n//                 axios.get(`${SERVER_HOST}/shirts/${item.shirtID}`, { headers: { \"authorization\": localStorage.token } })\r\n//                     .then(res => {\r\n//                         const updatedItem = { ...res.data, quantity: item.quantity };\r\n//                         eachItemsInOrder.push(updatedItem);\r\n\r\n//                         // Check if all items are fetched\r\n//                         if (eachItemsInOrder.length === itemsInArray.items.length) {\r\n//                             // Add the price of the item to the total price\r\n//                             eachItemsInOrder.forEach(item => totalPrice += item.price * item.quantity);\r\n\r\n//                             // Push the order details to the allOrders array\r\n//                             allOrders.push({\r\n//                                 orderId: itemsInArray._id,\r\n//                                 refunded: itemsInArray.refunded,\r\n//                                 eachItemsInOrder: eachItemsInOrder,\r\n//                                 totalPrice: totalPrice\r\n//                             });\r\n\r\n//                             // Update state after all items are fetched\r\n//                             this.setState({ allOrders: allOrders }, () => {\r\n//                                 // Call loadShirtPhotos() after updating state\r\n//                                 this.loadShirtPhotos();\r\n//                             });\r\n//                         }\r\n//                     })\r\n//                     .catch(err => {\r\n//                         console.error(\"Error fetching shirt data:\", err);\r\n//                     });\r\n//             });\r\n//         });\r\n//     }\r\n//     handleSearchChange = (event) => {\r\n//         // Update search query state\r\n//         this.setState({ searchQuery: event.target.value });\r\n//         // if (event.target.value === \"\") {\r\n//         // Reload shirt photos when the search query is cleared\r\n//         this.loadShirtPhotos();\r\n//         // }\r\n//     };\r\n\r\n\r\n//     handleSortByTotalPrice = () => {\r\n//         this.setState({ sortFunction: \"totalPrice\" });\r\n\r\n//     };\r\n\r\n\r\n//     handleSortByDefault = () => {\r\n//         this.setState({ sortFunction: \"name\" }); // Set the default sorting option\r\n//     };\r\n\r\n//     handleSizeFilterChange = (event) => {\r\n//         this.setState({ sizeFilter: event.target.value });\r\n//         this.loadShirtPhotos();\r\n//     };\r\n\r\n//     render() {\r\n//         const { allOrders, searchQuery, sortFunction, sizeFilter } = this.state;\r\n//         console.log(searchQuery)\r\n//         console.log(\"Alloders: \", allOrders)\r\n//         let filteredOrders = allOrders.filter(order =>\r\n//             order.eachItemsInOrder.some(item => item.name.toLowerCase().includes(searchQuery.toLowerCase()))\r\n//         );\r\n\r\n//         if (sizeFilter !== \"\") {\r\n//             filteredOrders = filteredOrders.filter(order =>\r\n//                 order.eachItemsInOrder.some(item => item.size.toLowerCase() === sizeFilter.toLowerCase())\r\n//             );\r\n//         }\r\n\r\n//         let sortedOrders = [...filteredOrders];\r\n//         if (sortFunction === \"totalPrice\") {\r\n//             sortedOrders.sort((a, b) => a.totalPrice - b.totalPrice);\r\n//         } else if (sortFunction === \"name\") {\r\n//             sortedOrders = filteredOrders;\r\n//         }\r\n\r\n//         return (\r\n//             <>\r\n//                 {localStorage.accessLevel > ACCESS_LEVEL_GUEST ? (\r\n//                     <div>\r\n//                         <NavigationBar />\r\n//                         <h2>Ordered Items</h2>\r\n//                         <input\r\n//                             type=\"text\"\r\n//                             placeholder=\"Search...\"\r\n//                             value={searchQuery}\r\n//                             onChange={this.handleSearchChange}\r\n//                         />\r\n//                         <div className=\"sortInViewPurchaseHistory\">\r\n//                             <select value={sortFunction} onChange={(e) => {\r\n//                                 if (e.target.value === 'totalPrice') {\r\n//                                     this.handleSortByTotalPrice();\r\n//                                 } else if (e.target.value === 'name') {\r\n//                                     this.handleSortByDefault(); // Handle default sorting option\r\n//                                 }\r\n//                             }}>\r\n//                                 <option value=\"name\">Default Sorting</option>\r\n//                                 <option value=\"totalPrice\">Sort by Total Price</option>\r\n//                             </select>\r\n//                         </div>\r\n\r\n//                         <div>\r\n//                             {/* <h2>Filter by Size:</h2> */}\r\n//                             <select value={sizeFilter} onChange={this.handleSizeFilterChange}>\r\n//                                 <option value=\"\">All Sizes</option>\r\n//                                 <option value=\"XS\">XS</option>\r\n//                                 <option value=\"S\">S</option>\r\n//                                 <option value=\"M\">M</option>\r\n//                                 <option value=\"L\">L</option>\r\n//                                 <option value=\"XL\">XL</option>\r\n//                             </select>\r\n//                         </div>\r\n//                         {this.state.allOrders.length === 0 ? <h4>The User didn't purchase anything yet</h4>\r\n\r\n//                             :\r\n//                             <div>\r\n//                                 {sortedOrders.map(order => (\r\n//                                     <div key={order.orderId}>\r\n//                                         <h3>Order ID: {order.orderId}</h3>\r\n//                                         <table>\r\n//                                             <thead>\r\n//                                                 <tr>\r\n//                                                     <th>Photo</th>\r\n//                                                     <th>Photo</th>\r\n//                                                     <th>Name</th>\r\n//                                                     <th>Price</th>\r\n//                                                     <th>Size</th>\r\n//                                                     <th>Quantity</th>\r\n//                                                     <th>Total Price for this t-shirt</th>\r\n//                                                     <th>Return</th>\r\n//                                                     <th>Return</th>\r\n//                                                 </tr>\r\n//                                             </thead>\r\n//                                             <tbody>\r\n\r\n//                                                 {order.eachItemsInOrder.map(item => (\r\n//                                                     <tr>\r\n//                                                         <td>{item.shirtPhotoFilename.map(photo => (\r\n//                                                             <img key={photo._id} className={photo._id} alt=\"\" src={`data:;base64,${photo.image}`} />\r\n//                                                         ))}\r\n//                                                         </td>\r\n//                                                         <td>{item.name}</td>\r\n//                                                         <td>{item.price}</td>\r\n//                                                         <td>{item.size}</td>\r\n//                                                         <td>{item.quantity}</td>\r\n//                                                         <td>{item.price * item.quantity}</td>\r\n//                                                         <td>\r\n//                                                             <button onClick={() => this.handleDelete(order.orderId, item._id, item.stock, item.quantity, item.price * item.quantity, order.refunded, order.totalPrice)}>Return Product</button>\r\n//                                                         </td>\r\n//                                                     </tr>\r\n//                                                 ))}\r\n//                                                 <tr>\r\n//                                                     <td >Total Of The Order Price:</td>\r\n//                                                     <td>{order.totalPrice}</td>\r\n//                                                 </tr>\r\n//                                             </tbody>\r\n//                                         </table>\r\n//                                     </div>\r\n//                                 ))}\r\n//                             </div>\r\n\r\n//                         }\r\n//                     </div>\r\n//                 ) : (\r\n//                     <Redirect to={\"/main\"} />\r\n//                 )}\r\n//             </>\r\n//         );\r\n//     }\r\n// }\r\nimport React, { Component } from \"react\"\r\nimport { Redirect, Link } from \"react-router-dom\"\r\n\r\nimport axios from \"axios\"\r\n\r\nimport NavigationBar from \"./NavigationBar\"\r\n\r\nimport { ACCESS_LEVEL_GUEST, ACCESS_LEVEL_ADMIN, ACCESS_LEVEL_NORMAL_USER, SERVER_HOST } from \"../config/global_constants\"\r\n\r\n\r\nexport default class ViewAllUsers extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n\r\n        this.state = {\r\n            purchaseHistory: [],\r\n            eachItemsInOrder: [],\r\n            allOrders: [],\r\n            searchQuery: \"\",\r\n            sortFunction: \"name\",\r\n            sizeFilter: \"\"\r\n        }\r\n    }\r\n\r\n\r\n    // componentDidMount() {\r\n    //     if (localStorage.accessLevel > ACCESS_LEVEL_GUEST) {\r\n    //         let userEmail = JSON.parse(localStorage.getItem(\"userEmail\"));\r\n    //         axios.get(`${SERVER_HOST}/sales/email?email=${userEmail}`)\r\n    //         .then(res => {\r\n    //             // Update purchaseHistory state\r\n    //             this.setState({ purchaseHistory: res.data }, () => {\r\n    //                 // Iterate over each item in purchase history and fetch shirt details\r\n    //                 this.state.purchaseHistory.forEach(itemsInArray => {\r\n    //                     itemsInArray.items.forEach(item => { // Changed from map to forEach\r\n    //                         axios.get(`${SERVER_HOST}/shirts/${item.shirtID}`, { headers: { \"authorization\": localStorage.token } })\r\n    //                         .then(res => {\r\n    //                             const updatedItem = { ...res.data, quantity: item.quantity }; // Add quantity property\r\n    //                             // Update eachItemsInOrder state by appending new items\r\n    //                             this.setState(prevState => ({\r\n    //                                 eachItemsInOrder: [...prevState.eachItemsInOrder, updatedItem]\r\n    //                             }));\r\n    //                         })\r\n    //                         .catch(err => {\r\n    //                             console.error(\"Error fetching shirt data:\", err);\r\n    //                         });\r\n    //                     });\r\n    //                 });\r\n    //             });\r\n    //         })\r\n    //         .catch(err => {\r\n    //             console.error(\"Error fetching user data:\", err);\r\n    //         });\r\n    //     }\r\n    // }\r\n    // componentDidMount() {\r\n    //     if (localStorage.accessLevel > ACCESS_LEVEL_GUEST) {\r\n    //         let userEmail = JSON.parse(localStorage.getItem(\"userEmail\"));\r\n    //         axios.get(`${SERVER_HOST}/sales/email?email=${userEmail}`)\r\n    //         .then(res => {\r\n    //             // Update purchaseHistory state\r\n    //             this.setState({ purchaseHistory: res.data }, () => {\r\n    //                 // Iterate over each item in purchase history\r\n    //                 this.state.purchaseHistory.forEach((itemsInArray, index) => {\r\n    //                     // Store each itemsInOrder array in a separate array\r\n    //                     let eachItemsInOrder = [];\r\n    //                     itemsInArray.items.forEach(item => {\r\n    //                         axios.get(`${SERVER_HOST}/shirts/${item.shirtID}`, { headers: { \"authorization\": localStorage.token } })\r\n    //                         .then(res => {\r\n    //                             const updatedItem = { ...res.data, quantity: item.quantity }; // Add quantity property\r\n    //                             eachItemsInOrder.push(updatedItem);\r\n    //                         })\r\n    //                         .catch(err => {\r\n    //                             console.error(\"Error fetching shirt data:\", err);\r\n    //                         });\r\n    //                     });\r\n    //                     // Push eachItemsInOrder array into allOrders array\r\n    //                     this.setState(prevState => ({\r\n    //                         allOrders: [\r\n    //                             ...prevState.allOrders,\r\n    //                             {\r\n    //                                 orderId: itemsInArray._id, // Store item._id into allOrders\r\n    //                                 eachItemsInOrder: eachItemsInOrder\r\n    //                             }\r\n    //                         ]\r\n    //                     }));\r\n    //                 });\r\n    //             });\r\n    //         })\r\n    //         .catch(err => {\r\n    //             console.error(\"Error fetching user data:\", err);\r\n    //         });\r\n    //     }\r\n    // }\r\n\r\n\r\n    componentDidMount() {\r\n        if (localStorage.accessLevel > ACCESS_LEVEL_GUEST) {\r\n            //             let userEmail;\r\n            //             // const currentUrl = window.location.pathname;\r\n            //             if(localStorage.accessLevel === ACCESS_LEVEL_NORMAL_USER){\r\n            //             userEmail = JSON.parse(localStorage.getItem(\"userEmail\"));\r\n            //             console.log(userEmail)\r\n            //             }else if(localStorage.accessLevel ===ACCESS_LEVEL_ADMIN){\r\n            //                 userEmail = this.props.match.params.email;\r\n            //                 console.log(userEmail)\r\n            //             }\r\n            // console.log(userEmail)\r\n            let userEmail = '';\r\n            if (localStorage.accessLevel > ACCESS_LEVEL_NORMAL_USER) {\r\n                userEmail = this.props.match.params.email;\r\n            } else {\r\n                userEmail = JSON.parse(localStorage.getItem(\"userEmail\"));\r\n            }\r\n            console.log(userEmail);\r\n\r\n            axios.get(`${SERVER_HOST}/sales/email?email=${userEmail}`)\r\n                .then(res => {\r\n                    // Update purchase history state\r\n                    this.setState({ purchaseHistory: res.data }, () => {\r\n                        // Iterate over each purchase history item\r\n                        this.state.purchaseHistory.forEach((itemsInArray, index) => {\r\n                            let eachItemsInOrder = [];\r\n                            let totalPrice = 0; // Initialize total price for the order\r\n                            itemsInArray.items.forEach(item => {\r\n                                // Fetch shirt details and calculate total price for each item\r\n                                axios.get(`${SERVER_HOST}/shirts/${item.shirtID}`, { headers: { \"authorization\": localStorage.token } })\r\n                                    .then(res => {\r\n                                        const updatedItem = { ...res.data, quantity: item.quantity };\r\n                                        eachItemsInOrder.push(updatedItem);\r\n\r\n                                        // Check if all items are fetched\r\n                                        if (eachItemsInOrder.length === itemsInArray.items.length) {\r\n                                            // Add the price of the item to the total price\r\n                                            eachItemsInOrder.map(item => totalPrice += item.price * item.quantity)\r\n\r\n                                            // Update state after all items are fetched\r\n                                            this.setState(prevState => ({\r\n                                                allOrders: [\r\n                                                    ...prevState.allOrders,\r\n                                                    {\r\n                                                        orderId: itemsInArray._id,\r\n                                                        refunded: itemsInArray.refunded,\r\n                                                        eachItemsInOrder: eachItemsInOrder,\r\n                                                        totalPrice: totalPrice\r\n                                                    }\r\n                                                ]\r\n                                            }), () => {\r\n                                                // Call loadShirtPhotos() after updating state\r\n                                                this.loadShirtPhotos();\r\n                                            });\r\n                                        }\r\n                                    })\r\n                                    .catch(err => {\r\n                                        console.error(\"Error fetching shirt data:\", err);\r\n                                    });\r\n                            });\r\n                        });\r\n                    });\r\n                })\r\n                .catch(err => {\r\n                    console.error(\"Error fetching user data:\", err);\r\n                });\r\n        }\r\n    }\r\n\r\n    loadShirtPhotos() {\r\n        this.state.allOrders.forEach(order => {\r\n            order.eachItemsInOrder.forEach(item => {\r\n                item.shirtPhotoFilename.forEach(photo => {\r\n                    axios.get(`${SERVER_HOST}/shirts/photo/${photo.filename}`)\r\n                        .then(res => {\r\n                            // Update shirt photo in DOM\r\n                            const elements = document.getElementsByClassName(photo._id);\r\n                            Array.from(elements).forEach(element => {\r\n                                element.src = `data:;base64,${res.data.image}`;\r\n                            });\r\n                        })\r\n                        .catch(err => {\r\n                            // Handle error\r\n                            console.error(\"Error loading shirt photo:\", err);\r\n                        });\r\n\r\n                });\r\n            });\r\n        });\r\n    }\r\n\r\n    handleDelete = (orderId, itemId, stockBeforeReturn, itemQuantity, refundMoney, refundedMoney, totalPrice) => {\r\n        let newItems = [];\r\n        let saleObject;\r\n\r\n        // Map through purchase history to find the order with the given orderId\r\n        const updatedPurchaseHistory = this.state.purchaseHistory.map(order => {\r\n            if (order._id === orderId) {\r\n                // Iterate over the items in the order\r\n                order.items.forEach(item => {\r\n                    if (item.shirtID === itemId) {\r\n                        // If the item matches the itemId, subtract the returned quantity from the item's quantity\r\n                        item.quantity -= itemQuantity;\r\n\r\n                        // If the updated quantity is zero or less, don't add it to newItems\r\n                        if (item.quantity > 0) {\r\n                            newItems.push(item); // Add the updated item to newItems\r\n                        }\r\n                    } else {\r\n                        newItems.push(item); // Add unchanged items to newItems\r\n                    }\r\n                });\r\n\r\n                // Create the saleObject with updated refund and price\r\n                saleObject = {\r\n                    refunded: refundedMoney + refundMoney,\r\n                    price: totalPrice - refundMoney,\r\n                    items: newItems // Set the newItems array\r\n                };\r\n            }\r\n            return order;\r\n        });\r\n\r\n        // Update the purchase history in the state\r\n        this.setState({ purchaseHistory: updatedPurchaseHistory }, () => {\r\n            this.updateAllOrders(updatedPurchaseHistory);\r\n        });\r\n\r\n        axios.put(`${SERVER_HOST}/sales/${orderId}`, saleObject, { headers: { \"authorization\": localStorage.token } })\r\n            .then(res => {\r\n                // Handle success if needed\r\n                console.log(`Updated Sales with ID: ${orderId}`);\r\n                localStorage.removeItem(\"itemsInCart\");\r\n            })\r\n            .catch(err => {\r\n                // Handle error if needed\r\n                console.error(`Error updating Sales with ID: ${orderId}`, err);\r\n            });\r\n\r\n        let shirtObject = {\r\n            stock: stockBeforeReturn + itemQuantity,\r\n            sold: false\r\n        };\r\n        axios.put(`${SERVER_HOST}/shirts/${itemId}`, shirtObject, { headers: { \"authorization\": localStorage.token } })\r\n            .then(res => {\r\n                // Handle success if needed\r\n                console.log(`Stock updated for shirt with ID: ${itemId}`);\r\n                localStorage.removeItem(\"itemsInCart\");\r\n            })\r\n            .catch(err => {\r\n                // Handle error if needed\r\n                console.error(`Error updating stock for shirt with ID: ${itemId}`, err);\r\n            });\r\n    }\r\n\r\n\r\n    updateAllOrders = (purchaseHistory) => {\r\n        let allOrders = [];\r\n        purchaseHistory.forEach((itemsInArray, index) => {\r\n            let eachItemsInOrder = [];\r\n            let totalPrice = 0; // Initialize total price for the order\r\n            itemsInArray.items.forEach(item => {\r\n                // Fetch shirt details and calculate total price for each item\r\n                axios.get(`${SERVER_HOST}/shirts/${item.shirtID}`, { headers: { \"authorization\": localStorage.token } })\r\n                    .then(res => {\r\n                        const updatedItem = { ...res.data, quantity: item.quantity };\r\n                        eachItemsInOrder.push(updatedItem);\r\n\r\n                        // Check if all items are fetched\r\n                        if (eachItemsInOrder.length === itemsInArray.items.length) {\r\n                            // Add the price of the item to the total price\r\n                            eachItemsInOrder.forEach(item => totalPrice += item.price * item.quantity);\r\n\r\n                            // Push the order details to the allOrders array\r\n                            allOrders.push({\r\n                                orderId: itemsInArray._id,\r\n                                refunded: itemsInArray.refunded,\r\n                                eachItemsInOrder: eachItemsInOrder,\r\n                                totalPrice: totalPrice\r\n                            });\r\n\r\n                            // Update state after all items are fetched\r\n                            this.setState({ allOrders: allOrders }, () => {\r\n                                // Call loadShirtPhotos() after updating state\r\n                                this.loadShirtPhotos();\r\n                            });\r\n                        }\r\n                    })\r\n                    .catch(err => {\r\n                        console.error(\"Error fetching shirt data:\", err);\r\n                    });\r\n            });\r\n        });\r\n    }\r\n    handleSearchChange = (event) => {\r\n        // Update search query state\r\n        this.setState({ searchQuery: event.target.value });\r\n        // if (event.target.value === \"\") {\r\n        // Reload shirt photos when the search query is cleared\r\n        this.loadShirtPhotos();\r\n        // }\r\n    };\r\n\r\n\r\n    handleSortByTotalPrice = () => {\r\n        this.setState({ sortFunction: \"totalPrice\" });\r\n\r\n    };\r\n\r\n\r\n    handleSortByDefault = () => {\r\n        this.setState({ sortFunction: \"name\" }); // Set the default sorting option\r\n    };\r\n\r\n    handleSizeFilterChange = (event) => {\r\n        this.setState({ sizeFilter: event.target.value });\r\n        this.loadShirtPhotos();\r\n    };\r\n\r\n    render() {\r\n        const { allOrders, searchQuery, sortFunction, sizeFilter } = this.state;\r\n        console.log(searchQuery)\r\n        let filteredOrders = allOrders.filter(order =>\r\n            order.eachItemsInOrder.some(item => item.name.toLowerCase().includes(searchQuery.toLowerCase()))\r\n        );\r\n\r\n        if (sizeFilter !== \"\") {\r\n            filteredOrders = filteredOrders.filter(order =>\r\n                order.eachItemsInOrder.some(item => item.size.toLowerCase() === sizeFilter.toLowerCase())\r\n            );\r\n        }\r\n\r\n        let sortedOrders = [...filteredOrders];\r\n        if (sortFunction === \"totalPrice\") {\r\n            sortedOrders.sort((a, b) => a.totalPrice - b.totalPrice);\r\n        } else if (sortFunction === \"name\") {\r\n            sortedOrders = filteredOrders;\r\n        }\r\n\r\n        return (\r\n            <>\r\n                {localStorage.accessLevel > ACCESS_LEVEL_GUEST ? (\r\n                    <div className=\"PurchaseHistoryPage\">\r\n                        <NavigationBar />\r\n                        <h2>Ordered Items</h2>\r\n                        <div className=\"purchaseFunctionAndTableContainer\">\r\n                            <div className=\"HistoryPageFunction\">\r\n\r\n                                <input\r\n                                    type=\"text\"\r\n                                    placeholder=\"Search...\"\r\n                                    value={searchQuery}\r\n                                    onChange={this.handleSearchChange}\r\n                                />\r\n                                <div className=\"Historpagesortandfilter\">\r\n                                    <div className=\"sortInViewPurchaseHistory\">\r\n                                        <select value={sortFunction} onChange={(e) => {\r\n                                            if (e.target.value === 'totalPrice') {\r\n                                                this.handleSortByTotalPrice();\r\n                                            } else if (e.target.value === 'name') {\r\n                                                this.handleSortByDefault(); // Handle default sorting option\r\n                                            }\r\n                                        }}>\r\n                                            <option value=\"name\">Default Sorting</option>\r\n                                            <option value=\"totalPrice\">Sort by Total Price</option>\r\n                                        </select>\r\n                                    </div>\r\n\r\n                                    <div>\r\n                                        {/* <h2>Filter by Size:</h2> */}\r\n                                        <select value={sizeFilter} onChange={this.handleSizeFilterChange}>\r\n                                            <option value=\"\">All Sizes</option>\r\n                                            <option value=\"XS\">XS</option>\r\n                                            <option value=\"S\">S</option>\r\n                                            <option value=\"M\">M</option>\r\n                                            <option value=\"L\">L</option>\r\n                                            <option value=\"XL\">XL</option>\r\n                                        </select>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {this.state.allOrders.length === 0 ? <h4>The User didn't purchase anything yet</h4>\r\n\r\n                                :\r\n                                <div className=\"orderContainer\">\r\n                                    {sortedOrders.map(order => (\r\n                                        <div key={order.orderId}>\r\n                                            <div className=\"wholediv\">\r\n                                                <div className=\"orderiddiv\">\r\n                                                    <h3 className=\"OrderId\">Order ID- {order.orderId}</h3>\r\n                                                </div>\r\n                                                <div className=\"abovetable\">\r\n                                                    <table className=\"viewhistorytable\">\r\n                                                        <thead>\r\n                                                            <tr>\r\n                                                                <th>Photo</th>\r\n                                                                <th>Name</th>\r\n                                                                <th>Price</th>\r\n                                                                <th>Size</th>\r\n                                                                <th>Quantity</th>\r\n                                                                <th>Total Price for this t-shirt</th>\r\n                                                                <th>Return</th>\r\n                                                            </tr>\r\n                                                        </thead>\r\n                                                        <tbody>\r\n                                                            {order.eachItemsInOrder.map(item => (\r\n                                                                <tr key={item._id}>\r\n                                                                    <td>{item.shirtPhotoFilename.map(photo => (\r\n                                                                        <img key={photo._id} className={photo._id} alt=\"\" src={`data:;base64,${photo.image}`} />\r\n                                                                    ))}\r\n                                                                    </td>\r\n                                                                    <td>{item.name}</td>\r\n                                                                    <td>{item.price}</td>\r\n                                                                    <td>{item.size}</td>\r\n                                                                    <td>{item.quantity}</td>\r\n                                                                    <td>{item.price * item.quantity}</td>\r\n                                                                    <td>\r\n                                                                        <button className=\"returnButton\" onClick={() => this.handleDelete(order.orderId, item._id, item.stock, item.quantity, item.price * item.quantity, order.refunded, order.totalPrice)}>Return Product</button>\r\n                                                                    </td>\r\n                                                                </tr>\r\n                                                            ))}\r\n                                                            <tr>\r\n                                                                <td>Total Of The Order Price:</td>\r\n                                                                <td>€:{order.totalPrice}</td>\r\n                                                            </tr>\r\n                                                        </tbody>\r\n                                                    </table>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                ) : (\r\n                    <Redirect to={\"/main\"} />\r\n                )}\r\n            </>\r\n        );\r\n    }\r\n}","import React, {Component} from \"react\"\r\nimport {BrowserRouter, Switch, Route} from \"react-router-dom\"\r\n\r\nimport \"bootstrap/dist/css/bootstrap.css\"\r\nimport \"./css/App.css\"\r\nimport \"./scss/style.css\"\r\n\r\nimport Register from \"./components/Register\"\r\nimport ResetDatabase from \"./components/ResetDatabase\"\r\nimport Login from \"./components/Login\"\r\nimport Logout from \"./components/Logout\"\r\nimport LoggedInRoute from \"./components/LoggedInRoute\"\r\nimport PayPalMessage from \"./components/PayPalMessage\"\r\n\r\nimport Contact from \"./components/Contact\"\r\nimport ShoppingCart from \"./components/ShoppingCart\"\r\n\r\nimport AddTShirt from \"./components/AddTShirt\"\r\nimport Main from \"./components/Main\"\r\nimport EditTShirt from \"./components/EditTShirt\"\r\nimport DeleteTShirt from \"./components/DeleteTShirt\"\r\nimport SubShirt from \"./components/SubShirt\"\r\nimport About from \"./components/About\"\r\nimport NavigationBar from \"./components/NavigationBar\"\r\nimport BuyShirt from \"./components/BuyShirt\"\r\nimport Dashboard from \"./components/Dashboard\"\r\nimport ViewAllUsers from \"./components/ViewAllUsers\"\r\nimport ViewPurchaseHistory from \"./components/ViewPurchaseHistory\"\r\n\r\nimport {ACCESS_LEVEL_GUEST} from \"./config/global_constants\"\r\n\r\n\r\nif (typeof localStorage.accessLevel === \"undefined\")\r\n{\r\n    localStorage.name = \"GUEST\"\r\n    localStorage.accessLevel = ACCESS_LEVEL_GUEST\r\n    localStorage.token = null\r\n    localStorage.profilePhoto = null\r\n}\r\n\r\n    \r\nexport default class App extends Component \r\n{\r\n    render() \r\n    {\r\n        return (\r\n            <BrowserRouter>\r\n                <Switch>\r\n                    <Route exact path=\"/Register\" component={Register} />\r\n                    <Route exact path=\"/ResetDatabase\" component={ResetDatabase} /> \r\n                    <Route exact path=\"/Login\" component={Login} />\r\n                    <Route exact path=\"/BuyShirt/:id\" component={BuyShirt} />\r\n                    <Route exact path=\"/PayPalMessage/:messageType/:payPalPaymentID\" component={PayPalMessage}/>\r\n                    <Route exact path=\"/Contact\" component={Contact} />\r\n                    <Route exact path=\"/ShoppingCart/\" component={ShoppingCart} />  \r\n                    <Route exact path=\"/Dashboard\" component={Dashboard} />  \r\n                    <LoggedInRoute exact path=\"/Logout\" component={Logout} />\r\n                    <Route exact path=\"/AddTShirt\" component={AddTShirt}/> \r\n                    <LoggedInRoute exact path=\"/EditTShirt/:id\" component={EditTShirt} />\r\n                    <LoggedInRoute exact path=\"/DeleteTShirt/:id\" component={DeleteTShirt} />\r\n                    <LoggedInRoute exact path=\"/SubShirt/:id\" component={SubShirt} />\r\n                    <Route exact path=\"/main\" component={Main}/>\r\n                    <Route exact path=\"/About\" component={About}/>\r\n                    <Route exact path=\"/NavigationBar\" component={NavigationBar}/>\r\n                    <Route exact path=\"/ViewAllUsers\" component={ViewAllUsers}/>\r\n                    <Route exact path=\"/BuyShirt\" component={BuyShirt}/>\r\n                    <Route exact path=\"/ViewPurchaseHistory\" component={ViewPurchaseHistory}/>\r\n                    <Route exact path=\"/ViewPurchaseHistory/:email\" component={ViewPurchaseHistory}/>\r\n                    <Route path=\"*\" component={Main}/>                            \r\n                </Switch>\r\n            </BrowserRouter>\r\n        )\r\n    }\r\n}","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}","import React from \"react\"\r\nimport ReactDOM from \"react-dom\"\r\nimport \"./css/index.css\"\r\nimport App from \"./App\"\r\nimport * as serviceWorker from \"./serviceWorker\"\r\n\r\n\r\n\r\nReactDOM.render(<App/>, document.getElementById(`root`))\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister()\r\n"],"sourceRoot":""}